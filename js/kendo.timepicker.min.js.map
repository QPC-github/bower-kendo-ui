{"version":3,"file":"kendo.timepicker.min.js","sources":["kendo.timepicker.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define){\n    define('kendo.timepicker',[ \"./kendo.popup\", \"./kendo.dateinput\", \"./kendo.html.button\"], f);\n})(function(){\n\nvar __meta__ = { // jshint ignore:line\n    id: \"timepicker\",\n    name: \"TimePicker\",\n    category: \"web\",\n    description: \"The TimePicker widget allows the end user to select a value from a list of predefined values or to type a new value.\",\n    depends: [ \"popup\", \"html.button\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        keys = kendo.keys,\n        html = kendo.html,\n        parse = kendo.parseDate,\n        activeElement = kendo._activeElement,\n        extractFormat = kendo._extractFormat,\n        support = kendo.support,\n        browser = support.browser,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        ns = \".kendoTimePicker\",\n        CLICK = \"click\" + ns,\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        LI = \"li\",\n        SPAN = \"<span></span>\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        MOUSEDOWN = \"mousedown\" + ns,\n        MS_PER_MINUTE = 60000,\n        MS_PER_DAY = 86400000,\n        SELECTED = \"k-selected\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_SELECTED = \"aria-selected\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_READONLY = \"aria-readonly\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ID = \"id\",\n        isArray = Array.isArray,\n        extend = $.extend,\n        DATE = Date,\n        dateFormatRegExp = /d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|\"[^\"]*\"|'[^']*'/g,\n        LITERAL = \"literal\",\n        MONTH = \"month\",\n        HOUR = \"hour\",\n        ZONE = \"zone\",\n        WEEKDAY = \"weekday\",\n        QUARTER = \"quarter\",\n        DATE_FIELD_MAP = {\n            \"G\": \"era\",\n            \"y\": \"year\",\n            \"q\": QUARTER,\n            \"Q\": QUARTER,\n            \"M\": MONTH,\n            \"L\": MONTH,\n            \"d\": \"day\",\n            \"E\": WEEKDAY,\n            \"c\": WEEKDAY,\n            \"e\": WEEKDAY,\n            \"h\": HOUR,\n            \"H\": HOUR,\n            \"k\": HOUR,\n            \"K\": HOUR,\n            \"m\": \"minute\",\n            \"s\": \"second\",\n            \"a\": \"dayperiod\",\n            \"x\": ZONE,\n            \"X\": ZONE,\n            \"z\": ZONE,\n            \"Z\": ZONE\n        },\n        NAME_TYPES = {\n            month: {\n                type: \"months\",\n                minLength: 3,\n                standAlone: \"L\"\n            },\n\n            quarter: {\n                type: \"quarters\",\n                minLength: 3,\n                standAlone: \"q\"\n            },\n\n            weekday: {\n                type: \"days\",\n                minLength: {\n                    E: 0,\n                    c: 3,\n                    e: 3\n                },\n                standAlone: \"c\"\n            },\n\n            dayperiod: {\n                type: \"dayPeriods\",\n                minLength: 0\n            },\n\n            era: {\n                type: \"eras\",\n                minLength: 0\n            }\n        },\n        TODAY = new DATE(),\n        MODERN_RENDERING_TEMPLATE = '<div tabindex=\"0\" class=\"k-timeselector #=mainSize#\">' +\n            '<div class=\"k-time-header\">' +\n                '<span class=\"k-title\"></span>' +\n                '<button class=\"k-button #=buttonSize# k-rounded-md k-button-flat k-button-flat-base k-time-now\" title=\"Select now\" aria-label=\"Select now\"><span class=\"k-button-text\">#=messages.now#</span></button>' +\n            '</div>' +\n            '<div class=\"k-time-list-container\">' +\n                '<span class=\"k-time-highlight\"></span>' +\n            '</div>' +\n        '</div>',\n        NEW_RENDERING_FOOTER = '<div class=\"k-time-footer k-action-buttons\">' +\n            '<button class=\"k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-base k-time-cancel\" title=\"Cancel changes\" aria-label=\"Cancel changes\"><span class=\"k-button-text\">#=messages.cancel#</span></button>' +\n            '<button class=\"k-time-accept k-button #=buttonSize# k-rounded-md k-button-solid k-button-solid-primary\" title=\"Set time\" aria-label=\"Set time\"><span class=\"k-button-text\">#=messages.set#</span></button>' +\n            '</div>',\n        HIGHLIGHTCONTAINER = '<span class=\"k-time-highlight\"></span>';\n\n        TODAY = new Date(TODAY.getFullYear(), TODAY.getMonth(), TODAY.getDate(), 0, 0, 0);\n\n    var TimeView = function(options) {\n        var that = this,\n        id = options.id;\n\n        that.options = options;\n        that._dates = [];\n\n        that._createList(options.timeView && options.timeView.list === \"scroll\");\n\n        if (id) {\n            that._timeViewID = id + \"_timeview\";\n            that._optionID = id + \"_option_selected\";\n\n            that.ul.attr(ID, that._timeViewID);\n        }\n\n        that._heightHandler = that._height.bind(that);\n        that._ariaLabel();\n        that._popup();\n    };\n\n    TimeView.prototype = {\n        _createList: function (scroll) {\n            if (scroll) {\n                this._createScrollList();\n            } else {\n                this._createClassicRenderingList();\n            }\n        },\n        _createScrollList: function () {\n            var templateOptions = $.extend({}, this.options, {\n                mainSize: kendo.getValidCssClass(\"k-timeselector-\", \"size\", this.options.size || \"medium\"),\n                buttonSize: kendo.getValidCssClass(\"k-button-\", \"size\", this.options.size || \"medium\")\n            });\n            this.list = $(kendo.template(MODERN_RENDERING_TEMPLATE)(templateOptions))\n                .on(MOUSEDOWN, preventDefault);\n\n            if (!this.options.omitPopup) {\n                this.list.append(kendo.template(NEW_RENDERING_FOOTER)(templateOptions));\n            }\n\n            this.ul = this.list.find(\".k-time-list-container\");\n            this.list.on(\"click\"+ns, \".k-time-header button.k-time-now\", this._nowClickHandler.bind(this));\n            this.list.on(\"click\"+ns, \".k-time-footer button.k-time-cancel\", this._cancelClickHandler.bind(this));\n            this.list.on(\"click\"+ns, \".k-time-footer button.k-time-accept\", this._setClickHandler.bind(this));\n            this.list.on(\"mouseover\"+ns, \".k-time-list-wrapper\", this._mouseOverHandler.bind(this));\n            this.list.on(\"keydown\"+ns, this._scrollerKeyDownHandler.bind(this));\n        },\n\n        _ariaLabel: function(){\n            var that = this;\n            var inputElm = $(\"#\"+that.options.id);\n            var ul = that.ul;\n            var id = inputElm.attr(\"id\");\n            var labelElm = $(\"label[for=\\'\" + id  + \"\\']\");\n            var ariaLabel = inputElm.attr(\"aria-label\");\n            var ariaLabelledBy = inputElm.attr(\"aria-labelledby\");\n            var labelId;\n\n            if (ariaLabel) {\n                ul.attr(\"aria-label\", ariaLabel);\n            } else if (ariaLabelledBy){\n                ul.attr(\"aria-labelledby\", ariaLabelledBy);\n            } else if (labelElm.length){\n                labelId = labelElm.attr(\"id\");\n                if (labelId) {\n                    ul.attr(\"aria-labelledby\", labelId);\n                } else {\n                    labelId = kendo.guid();\n                    labelElm.attr(\"id\", labelId);\n                    ul.attr(\"aria-labelledby\", labelId);\n                }\n            }\n        },\n\n        _scrollerKeyDownHandler: function (e) {\n            var that = this,\n                key = e.keyCode,\n                list = $(e.currentTarget).find(\".k-time-list-wrapper.k-focus\"),\n                lists = that.list.find(\".k-time-list-wrapper\"),\n                length = lists.length,\n                index = lists.index(list),\n                isRtl = kendo.support.isRtl(that.wrapper),\n                itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0)),\n                container = list.find(\".k-time-container.k-content.k-scrollable\");\n\n            if (!list.length) {\n                return;\n            }\n\n            if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                if (index + 1 < length) {\n                    that._focusList(lists.eq(index + 1));\n                }\n\n            } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                if (index - 1 >= 0) {\n                    that._focusList(lists.eq(index - 1));\n                }\n            } else if (key == keys.UP) {\n                container.scrollTop(container.scrollTop() - itemHeight);\n                e.preventDefault();\n            } else if (key == keys.DOWN) {\n                container.scrollTop(container.scrollTop() + itemHeight);\n                e.preventDefault();\n            } else if (key === keys.ENTER) {\n                that._setClickHandler();\n            } else if (key === keys.ESC) {\n                that._cancelClickHandler();\n            }\n        },\n\n        _mouseOverHandler: function (e) {\n            this._focusList($(e.currentTarget));\n        },\n\n        _focusList: function(list){\n            this.list.find(\".k-time-list-wrapper\").removeClass(FOCUSED);\n            list.addClass(FOCUSED);\n            this.list.trigger(\"focus\");\n            this._scrollTop = list.find('.k-scrollable').scrollTop();\n        },\n        _createClassicRenderingList: function () {\n            var that = this;\n            var listParent = $('<div class=\"k-list ' + kendo.getValidCssClass(\"k-list-\", \"size\", that.options.size) + '\"><ul tabindex=\"-1\" role=\"listbox\" aria-hidden=\"true\" unselectable=\"on\" class=\"k-list-ul\"/></div>');\n\n            that.ul = listParent.find(\"ul\")\n                .css({\n                    overflow: support.kineticScrollNeeded ? \"\" : \"auto\"\n                })\n                .on(CLICK, LI, that._click.bind(that))\n                .on(\"mouseenter\" + ns, LI, function () {\n                    $(this).addClass(HOVER);\n                })\n                .on(\"mouseleave\" + ns, LI, function () {\n                    $(this).removeClass(HOVER);\n                });\n\n            that.list = $(\"<div class='k-list-container k-list-scroller' unselectable='on'/>\")\n                .append(listParent)\n                .on(MOUSEDOWN, preventDefault);\n\n            that.template = kendo.template('<li tabindex=\"-1\" role=\"option\" class=\"k-list-item\" unselectable=\"on\"><span class=\"k-list-item-text\">#=data#</span></li>', {\n                useWithBlock: false\n            });\n\n        },\n        current: function(candidate) {\n            var that = this,\n                active = that.options.active;\n\n            if (candidate !== undefined) {\n                if (that._current) {\n                    that._current\n                        .removeClass(SELECTED);\n                        if(that._current && that._current.length) {\n                            that._current[0].removeAttribute(ID);\n                            that._current[0].removeAttribute(ARIA_SELECTED);\n                        }\n                }\n\n                if (candidate) {\n                    candidate = $(candidate).addClass(SELECTED)\n                                            .attr(ID, that._optionID)\n                                            .attr(ARIA_SELECTED, true);\n\n                    that.scroll(candidate[0]);\n                }\n\n                that._current = candidate;\n\n                if (active) {\n                    active(candidate);\n                }\n            } else {\n                return that._current;\n            }\n        },\n\n        _updateTitle: function () {\n            this.list.find(\".k-time-header > .k-title\").html(kendo.toString(this._value, this.options.format, this.options.culture));\n        },\n\n        applyValue: function (value) {\n            if (!value) {\n                return;\n            }\n\n            var is12hourFormat = includes(this.options.format.toLowerCase(), \"t\");\n            var hours = value.getHours();\n            var minutes = value.getMinutes();\n            var seconds = value.getSeconds();\n            var designator;\n            var indexAttr = kendo.attr('index');\n            var hoursList = this.ul.find('[' + indexAttr + '=\"1\"]');\n            var minutessList = this.ul.find('[' + indexAttr + '=\"2\"]');\n            var secondsList = this.ul.find('[' + indexAttr + '=\"3\"]');\n            var designatorList = this.ul.find('[' + indexAttr + '=\"4\"]');\n\n            if (is12hourFormat) {\n                if (hours >= 12) {\n                    designator = \"PM\";\n                    if (hours > 12) {\n                        hours -= 12;\n                    }\n                } else {\n                    designator = \"AM\";\n                    if (hours === 0) {\n                        hours = 12;\n                    }\n                }\n            }\n\n            this._internalScroll = true;\n            if (hoursList.length) {\n                this._scrollListToPosition(hoursList, hours);\n            }\n\n            if (minutessList.length) {\n                this._scrollListToPosition(minutessList, minutes);\n            }\n\n            if (secondsList.length) {\n                this._scrollListToPosition(secondsList, seconds);\n            }\n\n            if (designatorList.length) {\n                this._scrollListToPosition(designatorList, designator);\n            }\n            this._internalScroll = false;\n        },\n\n        _scrollListToPosition: function(list, value) {\n            var item = list.find('.k-item[data-value=\"' + pad(value) + '\"]');\n            var itemHeight = getItemHeight(item);\n\n            list.scrollTop(list.find(\".k-item:visible\").index(item) * itemHeight);\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.ul.off(ns);\n            that.list.off(ns);\n            if (this.popup) {\n                that.popup.destroy();\n            }\n        },\n\n        open: function() {\n            var that = this;\n            var popupHovered;\n\n            if (!that.ul[0].firstChild || (that.ul.find(\"li\").length < 1)) {\n                that.bind();\n            }\n\n            // In some cases when the popup is opened resize is triggered which will cause it to close\n            // Setting the below flag will prevent this from happening\n            // Reference: https://github.com/telerik/kendo/pull/7553\n            popupHovered = that.popup._hovered;\n            that.popup._hovered = true;\n\n            that.popup.open();\n\n            setTimeout(function() {\n                that.popup._hovered = popupHovered;\n            }, 1);\n\n            if (that._current) {\n                that.scroll(that._current[0]);\n            }\n        },\n\n        dataBind: function(dates) {\n            var that = this,\n                options = that.options,\n                format = options.format,\n                toString = kendo.toString,\n                template = that.template,\n                length = dates.length,\n                idx = 0,\n                date,\n                html = \"\";\n\n            for (; idx < length; idx++) {\n                date = dates[idx];\n\n                if (isInRange(date, options.min, options.max)) {\n                    html += template(toString(date, format, options.culture));\n                }\n            }\n\n            that._html(html);\n        },\n\n        refresh: function() {\n            var that = this,\n                options = that.options,\n                format = options.format,\n                offset = dst(),\n                ignoreDST = offset < 0,\n                value = kendo.parseDate(that._value),\n                parsedValue = value ? mergeDateAndTime(value, options.min) : mergeDateAndTime(new Date(), options.min),\n                min = options.min,\n                max = options.max,\n                msMin = getMilliseconds(min),\n                msMax = getMilliseconds(max),\n                msLastTime = getMilliseconds(lastTimeOption(options.interval)),\n                msInterval = options.interval * MS_PER_MINUTE,\n                toString = kendo.toString,\n                template = that.template,\n                start = options.useValueToRender ? parsedValue : new Date(+options.min),\n                startDate = new DATE(start),\n                msStart,\n                length,\n                html = \"\";\n\n            if (ignoreDST) {\n                length = (MS_PER_DAY + (offset * MS_PER_MINUTE)) / msInterval;\n            } else {\n                length = MS_PER_DAY / msInterval;\n            }\n\n            if (msMin != msMax || msLastTime === msMax) {\n                if (msMin > msMax) {\n                    msMax += MS_PER_DAY;\n                }\n\n                length = ((msMax - msMin) / msInterval) + 1;\n            }\n\n            if (options.timeView && options.timeView.list === \"scroll\") {\n                html = that._createListContent(splitDateFormat(format));\n            } else {\n                that.getDatesInRange(msStart, msMax, startDate, max, msInterval, start).forEach(function (date) {\n                    html += template(toString(date, format, options.culture));\n                });\n            }\n\n            that._html(html);\n        },\n\n        _showAllHiddenItems: function() {\n            var items = this.list.find('.k-time-container');\n            var length = items.length;\n            var item;\n\n            for (var i = 0; i < length; i++) {\n                item = $(items[i]);\n                item.find('.k-item:hidden').show();\n                this._updateListBottomOffset(item);\n            }\n        },\n\n        _updateListBottomOffset: function (list) {\n            var itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0));\n            var listHeight = list.outerHeight();\n            var bottomOffset = listHeight - itemHeight;\n            list.find(\".k-scrollable-placeholder\").css({\n                height: list.find(\"ul\").height() + bottomOffset\n            });\n        },\n\n        _updateHoursRange: function () {\n            var that = this;\n            var indexAttr = kendo.attr('index');\n            var hoursList = this.ul.find('[' + indexAttr + '=\"1\"]');\n            var minHours = this._minHours;\n            var maxHours = this._maxHours;\n            var is12hourFormat = includes(this.options.format.toLowerCase(), \"t\");\n            var useMax;\n            var useMin;\n            var selectedDesignator = this._findSelectedValue(this.ul.find('[' + indexAttr + '=\"4\"]'));\n\n            if (!hoursList.length) {\n                return;\n            }\n\n            if (is12hourFormat && selectedDesignator) {\n\n                if (selectedDesignator === \"AM\") {\n                    if (minHours < 12) {\n                        useMin = true;\n                    }\n\n                    if (maxHours < 12) {\n                        useMax = true;\n                    }\n                } else if (selectedDesignator === \"PM\") {\n\n                    if (minHours > 12) {\n                        useMin = true;\n                        minHours -= 12;\n                    }\n\n                    if (maxHours > 12) {\n                        useMax = true;\n                        maxHours -= 12;\n                    }\n                }\n\n                hoursList.find(\".k-item\").each(function (_, item) {\n                    item = $(item);\n                    var value = +item.attr(\"data-value\");\n                    if ((that._validateMin && useMin && value < minHours) || (that._validateMax && useMax && value > maxHours)) {\n                        item.hide();\n                    } else {\n                        item.show();\n                    }\n                });\n            } else {\n                hoursList.find(\".k-item\").each(function (_, item) {\n                    item = $(item);\n                    var value = +item.attr(\"data-value\");\n                    if ((that._validateMin && value < minHours) ||\n                        (that._validateMax && value > maxHours)) {\n                        item.hide();\n                    } else {\n                        item.show();\n                    }\n                });\n            }\n\n            this._updateListBottomOffset(hoursList);\n        },\n\n        _updateMinutesRange: function () {\n            var that = this;\n            var indexAttr = kendo.attr('index');\n            var minutesList = this.ul.find('[' + indexAttr + '=\"2\"]');\n            var minHours = this._minHours;\n            var maxHours = this._maxHours;\n            var minMinutes = this._minMinutes;\n            var maxMinutes = this._maxMinutes;\n            var selectedHour = +this._findSelectedValue(this.ul.find('[' + indexAttr + '=\"1\"]'));\n            var is12hourFormat = includes(this.options.format.toLowerCase(), \"t\");\n            var selectedDesignator = this._findSelectedValue(this.ul.find('[' + indexAttr + '=\"4\"]'));\n\n            if (is12hourFormat && selectedDesignator === \"PM\") {\n                selectedHour += 12;\n            }\n\n            if (!minutesList.length) {\n                return;\n            }\n\n            minutesList.find(\".k-item\").each(function (_, item) {\n                item = $(item);\n                var value = +item.attr(\"data-value\");\n                if ((that._validateMin && value < minMinutes && minHours && selectedHour === minHours) ||\n                    (that._validateMax && value > maxMinutes && maxHours && selectedHour === maxHours)) {\n                    item.hide();\n                } else {\n                    item.show();\n                }\n            });\n\n            this._updateListBottomOffset(minutesList);\n        },\n\n        _updateSecondsRange: function () {\n            var that = this;\n            var indexAttr = kendo.attr('index');\n            var secondsList = this.ul.find('[' + indexAttr + '=\"3\"]');\n            var minSeconds = this._minSeconds;\n            var maxSeconds = this._minSeconds;\n            var minMinutes = this._minMinutes;\n            var maxMinutes = this._maxMinutes;\n            var selectedMinutes = +this._findSelectedValue(this.ul.find('[' + indexAttr + '=\"2\"]'));\n\n            if (!secondsList.length) {\n                return;\n            }\n\n            secondsList.find(\".k-item\").each(function (_, item) {\n                item = $(item);\n                var value = +item.attr(\"data-value\");\n                if ((that._validateMin && value < minSeconds && minMinutes && selectedMinutes === minMinutes) ||\n                    (that._validateMax && value > maxSeconds && maxMinutes && selectedMinutes === maxMinutes)) {\n                    item.hide();\n                } else {\n                    item.show();\n                }\n            });\n\n            this._updateListBottomOffset(secondsList);\n        },\n\n        _updateDesignatorRange: function () {\n            var minHours = this._minHours;\n            var maxHours = this._maxHours;\n            var indexAttr = kendo.attr('index');\n            var designatorList = this.ul.find('[' + indexAttr + '=\"4\"]');\n\n            if (!designatorList.length) {\n               return;\n            }\n\n            if (this._validateMin && minHours >= 12) {\n                designatorList.find('.k-item[data-value=\"AM\"]').hide();\n            } else {\n                designatorList.find('.k-item[data-value=\"AM\"]').show();\n            }\n\n            if (this._validateMax && maxHours < 12) {\n                designatorList.find('.k-item[data-value=\"PM\"]').hide();\n            } else {\n                designatorList.find('.k-item[data-value=\"PM\"]').show();\n            }\n        },\n\n\n        _updateRanges: function () {\n            if (!this.options.specifiedRange) {\n                return;\n            }\n            if (!this._currentlySelected) {\n                this._currentlySelected = new Date();\n            }\n\n            var max = this.options.max;\n            var min = this.options.min;\n\n            if (this.options.validateDate) {\n                if (max.getFullYear() === this._currentlySelected.getFullYear() &&\n                    max.getMonth() === this._currentlySelected.getMonth() &&\n                    max.getDate() === this._currentlySelected.getDate()) {\n                    this._validateMax = true;\n                } else {\n                    this._validateMax = false;\n                }\n\n                if (min.getFullYear() === this._currentlySelected.getFullYear() &&\n                    min.getMonth() === this._currentlySelected.getMonth() &&\n                    min.getDate() === this._currentlySelected.getDate()) {\n                    this._validateMin = true;\n                } else {\n                    this._validateMin = false;\n                }\n\n                if (!this._validateMax && !this._validateMin) {\n                    this._showAllHiddenItems();\n                    return;\n                }\n            } else {\n                this._validateMax = true;\n                this._validateMin = true;\n            }\n\n            this._minMinutes = min.getMinutes();\n            this._maxMinutes = max.getMinutes();\n            this._minHours = min.getHours();\n            this._maxHours = max.getHours();\n            this._minSeconds = min.getSeconds();\n            this._maxSeconds = max.getSeconds();\n\n            this._updateDesignatorRange();\n            this._updateHoursRange();\n            this._updateMinutesRange();\n            this._updateSecondsRange();\n        },\n\n        addTranslate: function () {\n            var lists = this.ul.find(\".k-time-container.k-content.k-scrollable\");\n            var length = lists.length;\n            var list;\n            var itemHeight;\n            var listHeight;\n            var topOffset;\n            var translate;\n            var bottomOffset;\n\n            for (var i = 0; i < length; i++) {\n                list = lists.eq(i);\n                itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0));\n                listHeight = list.outerHeight();\n                topOffset = (listHeight - itemHeight) / 2;\n                translate = \"translateY(\" + topOffset + \"px)\";\n                bottomOffset = listHeight - itemHeight;\n                list.find(\"ul\").css({\n                    transform: translate,\n                    \"-ms-transform\": translate\n                });\n                list.find(\".k-scrollable-placeholder\").css({\n                    height: list.find(\"ul\").height() + bottomOffset\n                });\n                list.off(ns)\n                    .on(\"click\" + ns, \".k-item\", this._itemClickHandler.bind(this))\n                    .on(\"scroll\" + ns, this._listScrollHandler.bind(this));\n            }\n        },\n\n        _nowClickHandler: function (e) {\n            e.preventDefault();\n\n            var now = new Date();\n            this.value(now);\n            this.options.change(kendo.toString(now, this.options.format, this.options.culture), true);\n        },\n\n        _cancelClickHandler: function (e) {\n            e.preventDefault();\n            this.value(this._value);\n            this.popup.close();\n        },\n\n        _setClickHandler: function (e) {\n            e.preventDefault();\n            this._value = new Date(this._currentlySelected);\n\n            this.options.change(kendo.toString(this._currentlySelected, this.options.format, this.options.culture), true);\n            this.popup.close();\n        },\n\n        _listScrollHandler: function (e) {\n            var that = this;\n            var itemHeight = getItemHeight($(e.currentTarget).find(\".k-item:visible\").eq(0));\n\n            if (that._internalScroll) {\n                return;\n            }\n\n            if (that._scrollingTimeout) {\n                clearTimeout(that._scrollingTimeout);\n            }\n\n            that._scrollingTimeout = setTimeout(function () {\n                if (e.currentTarget.scrollTop % itemHeight > 1) {\n                    e.currentTarget.scrollTop += itemHeight - e.currentTarget.scrollTop % itemHeight;\n                }\n                that._scrollTop = e.currentTarget.scrollTop;\n                that._updateCurrentlySelected();\n                that._updateRanges();\n            }, 100);\n        },\n\n        _updateCurrentlySelected: function () {\n            var is12hourFormat = includes(this.options.format.toLowerCase(), \"t\");\n            var indexAttr = kendo.attr('index');\n            var hoursList = this.ul.find('[' + indexAttr + '=\"1\"]');\n            var minutesList = this.ul.find('[' + indexAttr + '=\"2\"]');\n            var secondsList = this.ul.find('[' + indexAttr + '=\"3\"]');\n            var designatorList = this.ul.find('[' + indexAttr + '=\"4\"]');\n            var selectedHour;\n            var selectedMinutes;\n            var selectedSeconds;\n            var selectedDesignator;\n\n            if (!this.ul.is(\":visible\")) {\n                return;\n            }\n\n            if (!this._currentlySelected) {\n                this._currentlySelected = this._value ? new Date(this._value) : new Date();\n            }\n\n            if (hoursList.length) {\n                selectedHour = +this._findSelectedValue(hoursList);\n            }\n\n            if (minutesList.length) {\n                selectedMinutes = +this._findSelectedValue(minutesList);\n            }\n\n            if (secondsList.length) {\n                selectedSeconds = +this._findSelectedValue(secondsList);\n            }\n\n            if (designatorList.length) {\n                selectedDesignator = this._findSelectedValue(designatorList);\n            }\n\n            if (is12hourFormat) {\n                if (selectedDesignator == \"PM\") {\n                    selectedHour += 12;\n                    if (selectedHour == 24) {\n                        selectedHour = 12;\n                    }\n                }\n\n                if (selectedDesignator === \"AM\" && selectedHour === 12) {\n                    selectedHour = 0;\n                }\n            }\n\n            if (selectedHour !== undefined) {\n                this._currentlySelected.setHours(selectedHour);\n            }\n\n            if (selectedMinutes !== undefined) {\n                this._currentlySelected.setMinutes(selectedMinutes);\n            }\n\n            if (selectedSeconds !== undefined) {\n                this._currentlySelected.setSeconds(selectedSeconds);\n            }\n        },\n\n        _findSelectedValue: function(list) {\n           var firstOccurence = firstItemIndex(list.scrollTop(), getItemHeight(list.find(\".k-item:visible\").eq(0)));\n           return list.find(\".k-item:visible\").eq(firstOccurence).attr(\"data-value\");\n        },\n\n        _itemClickHandler: function (e) {\n            var list = $(e.originalEvent.currentTarget);\n            var index = list.find(\".k-item:visible\").index($(e.currentTarget));\n            var itemHeight = getItemHeight(list.find(\".k-item:visible\").eq(0));\n\n            list.scrollTop(index * itemHeight);\n        },\n\n        getDatesInRange: function (msStart, msMax, startDate, max, msInterval, start) {\n            var result = [];\n\n            while (true) {\n                if (msMax && (getMilliseconds(start) >= msMax || startDate.getDate() != start.getDate())) {\n                    msStart = getMilliseconds(start);\n                    if (startDate < start) {\n                        msStart += MS_PER_DAY;\n                    }\n                    if (msStart > msMax) {\n                        start = new DATE(+max);\n                    }\n                    if (getMilliseconds(start) > 0) {\n                        result.push(new Date(start));\n                    }\n                    break;\n                }\n                if (startDate.getDate() != start.getDate()) {\n                    break;\n                }\n                result.push(new Date(start));\n                start.setTime(start.getTime() + msInterval);\n                if (!msMax && this.options.maxSet){\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _createListContent: function (parts) {\n            var length = parts.length;\n            var result = \"\";\n            var part;\n            var values;\n\n            for (var i = 0; i < length; i++) {\n                part = parts[i];\n\n                if (part.type === \"literal\") {\n                    result += this._literalTemplate(part);\n                } else {\n                    values = this._getValues(part, true);\n                    result += this._itemTemplate(values.values, part, this.options.messages[part.type], values.index);\n                }\n            }\n\n            return result;\n        },\n\n        _itemTemplate: function (values, part, title, index) {\n            var result =\"\";\n            var length = values.length;\n            var indexAttr = kendo.attr('index');\n\n            result += '<div class=\"k-time-list-wrapper\" role=\"presentation\">' +\n                        '<span class=\"k-title\">' + (title || part.type) + '</span>' +\n                        '<div class=\"k-time-list\">' +\n                            '<div class=\"k-time-container k-content k-scrollable\" role=\"presentation\" ' + indexAttr + '=\"' + index + '\">' +\n                                '<ul class=\"k-reset\">';\n\n            for( var i = 0;i < length; i++){\n                result += '<li class=\"k-item\" data-value=\"' + values[i] + '\">' +\n                                '<span>' + values[i] + '</span>' +\n                           '</li>';\n            }\n\n            result += '</ul>' +\n                      '<div class=\"k-scrollable-placeholder\"></div>' +\n                    '</div>' +\n                '</div>' +\n            '</div>';\n\n            return result;\n        },\n\n        _getValues: function (part, shouldPad) {\n            var result = [];\n            var index;\n            var start = 0;\n            var end;\n\n            if (part.type === \"hour\") {\n                start = part.hour12 ? 1 : 0;\n                index = 1;\n                end = part.hour12 ? 12 : 23;\n            } else if (part.type === \"minute\") {\n                index = 2;\n                end = 59;\n            } else if (part.type === \"second\") {\n                index = 3;\n                end = 59;\n            }\n\n            for (; start <= end; start++) {\n                result.push(shouldPad ? pad(start) : start);\n            }\n\n            return {\n                values: result,\n                index: index\n            };\n        },\n\n        _literalTemplate: function (part) {\n            var result = '<div class=\"k-time-separator\">' +\n                (part.pattern === \" tt\" ? ':' : part.pattern) +\n                '</div>';\n\n            if (part.pattern === \" tt\") {\n                result += this._itemTemplate([\"AM\", \"PM\"], part, \"AM/PM\", 4);\n            }\n\n            return result;\n        },\n\n        bind: function() {\n            var that = this,\n                dates = that.options.dates;\n\n            if (dates && dates[0]) {\n                that.dataBind(dates);\n            } else {\n                that.refresh();\n            }\n        },\n\n        _html: function(html) {\n            var that = this;\n\n            if (that.options.timeView && that.options.timeView.list === \"scroll\") {\n                html = HIGHLIGHTCONTAINER + html;\n                that.ul.html(html);\n            } else {\n                that.ul[0].innerHTML = html;\n                that.popup.unbind(OPEN, that._heightHandler);\n                that.popup.one(OPEN, that._heightHandler);\n\n                that.current(null);\n                that.select(that._value);\n            }\n        },\n\n        scroll: function(item) {\n            if (!item) {\n                return;\n            }\n\n            if (item.scrollIntoViewIfNeeded) {\n                item.scrollIntoViewIfNeeded();\n            } else {\n                scrollIntoViewIfNeeded(item);\n            }\n        },\n\n        select: function(li) {\n            var that = this,\n                options = that.options,\n                current = that._current,\n                selection;\n\n            if (li instanceof Date) {\n                li = kendo.toString(li, options.format, options.culture);\n            }\n\n            if (typeof li === \"string\") {\n                if (!current || current.text() !== li) {\n                    li = $.grep(that.ul[0].childNodes, function(node) {\n                        return (node.textContent || node.innerText) == li;\n                    });\n\n                    li = li[0] ? li : null;\n                } else {\n                    li = current;\n                }\n            }\n            selection = that._distinctSelection(li);\n            that.current(selection);\n        },\n\n        _distinctSelection: function(selection) {\n            var that = this,\n                currentValue,\n                selectionIndex;\n\n            if (selection && selection.length > 1) {\n                currentValue = getMilliseconds(that._value);\n                selectionIndex = $.inArray(currentValue, that._dates);\n                selection = that.ul.children()[selectionIndex];\n            }\n\n            return selection;\n        },\n\n        setOptions: function(options) {\n            var old = this.options;\n\n            options.min = parse(options.min);\n            options.max = parse(options.max);\n\n            this.options = extend(old, options, {\n                active: old.active,\n                change: old.change,\n                close: old.close,\n                open: old.open\n            });\n\n            this.bind();\n        },\n\n        toggle: function() {\n            var that = this;\n\n            if (that.popup.visible()) {\n                that.close();\n            } else {\n                that.open();\n            }\n        },\n\n        value: function(value) {\n            var that = this;\n\n            that._value = value;\n            if (that.ul[0].firstChild) {\n                if (that.options.timeView && that.options.timeView.list === \"scroll\") {\n                    that.applyValue(value);\n                } else {\n                    that.select(value);\n                }\n            }\n        },\n\n        _click: function(e) {\n            var that = this,\n                li = $(e.currentTarget),\n                date = li.text(),\n                dates = that.options.dates;\n\n            if (dates && dates.length > 0) {\n                date = dates[li.index()];\n            }\n\n            if (!e.isDefaultPrevented()) {\n                that.select(li);\n                that.options.change(date, true);\n                that.close();\n            }\n        },\n\n        _height: function() {\n            var that = this;\n            var list = that.list;\n            var parent = list.parent(\".k-animation-container\");\n            var height = that.options.height;\n\n            if (that.ul[0].children.length) {\n                list.add(parent)\n                    .show()\n                    .height(that.ul[0].scrollHeight > height ? height : \"auto\")\n                    .hide();\n            }\n        },\n\n        _parse: function(value) {\n            var that = this,\n                options = that.options,\n                min = getMilliseconds(options.min) != getMilliseconds(TODAY) ? options.min : null,\n                max = getMilliseconds(options.max) != getMilliseconds(TODAY) ? options.max : null,\n                current = that._value || min || max || TODAY;\n\n            if (value instanceof DATE) {\n                return value;\n            }\n\n            value = parse(value, options.parseFormats, options.culture);\n\n            if (value) {\n                value = new DATE(current.getFullYear(),\n                                 current.getMonth(),\n                                 current.getDate(),\n                                 value.getHours(),\n                                 value.getMinutes(),\n                                 value.getSeconds(),\n                                 value.getMilliseconds());\n            }\n\n            return value;\n        },\n\n        _adjustListWidth: function() {\n            var list = this.list,\n                width = list[0].style.width,\n                wrapper = this.options.anchor,\n                computedStyle, computedWidth,\n                outerWidth = kendo._outerWidth;\n\n            if (!list.data(\"width\") && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = computedStyle ? parseFloat(computedStyle.width) : outerWidth(wrapper);\n\n            if (computedStyle && (browser.mozilla || browser.msie)) { // getComputedStyle returns different box in FF and IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            width = computedWidth - (outerWidth(list) - list.width());\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: width\n            })\n            .data(\"width\", width);\n        },\n\n        _popup: function() {\n            var that = this,\n                list = that.list,\n                options = that.options,\n                anchor = options.anchor;\n\n            if(!this.options.omitPopup){\n\n                that.popup = new ui.Popup(list, extend(options.popup, {\n                    anchor: anchor,\n                    open: options.open,\n                    close: options.close,\n                    animation: options.animation,\n                    isRtl: support.isRtl(options.anchor),\n                    activate: function () {\n                        if (that.options.timeView && that.options.timeView.list === \"scroll\") {\n                            that.addTranslate();\n                            if (that._value) {\n                                that.applyValue(that._value);\n                            } else {\n                                that._updateCurrentlySelected();\n                            }\n                            that._updateRanges();\n                            that._focusList(that.list.find(\".k-time-list-wrapper\").eq(0));\n                        }\n                    }\n                }));\n            } else {\n                list.appendTo(options.timeDiv);\n            }\n        },\n\n        move: function(e) {\n            var that = this,\n                key = e.keyCode,\n                ul = that.ul[0],\n                current = that._current,\n                down = key === keys.DOWN;\n\n            if (key === keys.UP || down) {\n                if (e.altKey) {\n                    that.toggle(down);\n                    return;\n                } else if (down) {\n                    current = current ? current[0].nextSibling : ul.firstChild;\n                } else {\n                    current = current ? current[0].previousSibling : ul.lastChild;\n                }\n\n                if (current) {\n                    that.select(current);\n                }\n\n                that.options.change(that._current.text());\n                e.preventDefault();\n\n            } else if (key === keys.ENTER || key === keys.TAB || key === keys.ESC) {\n                e.preventDefault();\n                if (current) {\n                    that.options.change(current.text(), true);\n                }\n                that.close();\n            }\n        }\n    };\n\n    function dst() {\n        var today = new DATE(),\n            midnight = new DATE(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0),\n            noon = new DATE(today.getFullYear(), today.getMonth(), today.getDate(), 12, 0, 0);\n\n        return -1 * (midnight.getTimezoneOffset() - noon.getTimezoneOffset());\n    }\n\n    function getMilliseconds(date) {\n        return date.getHours() * 60 * MS_PER_MINUTE + date.getMinutes() * MS_PER_MINUTE + date.getSeconds() * 1000 + date.getMilliseconds();\n    }\n\n    function lastTimeOption(interval) {\n        var date = new Date(2100, 0, 1);\n        date.setMinutes(-interval);\n        return date;\n    }\n\n    function isInRange(value, min, max) {\n        var msMin = getMilliseconds(min),\n            msMax = getMilliseconds(max),\n            msValue;\n\n        if (!value || msMin == msMax) {\n            return true;\n        }\n\n        msValue = getMilliseconds(value);\n\n        if (msMin > msValue) {\n            msValue += MS_PER_DAY;\n        }\n\n        if (msMax < msMin) {\n            msMax += MS_PER_DAY;\n        }\n\n        return msValue >= msMin && msValue <= msMax;\n    }\n\n    TimeView.getMilliseconds = getMilliseconds;\n\n    kendo.TimeView = TimeView;\n\n    var TimePicker = Widget.extend({\n        init: function(element, options) {\n            var that = this, ul, timeView, disabled;\n\n            options = options || {};\n            options.componentType = options.componentType || \"classic\";\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.element;\n            options = that.options;\n\n            options.min = parse(element.attr(\"min\")) || parse(options.min);\n            options.max = parse(element.attr(\"max\")) || parse(options.max);\n\n            if (+options.max != +TODAY || +options.min != +TODAY) {\n                this._specifiedRange = true;\n            }\n\n            normalize(options);\n\n            that._initialOptions = extend({}, options);\n\n            that._wrapper();\n\n            if (that.options.timeView && that.options.timeView.list === \"scroll\") {\n                that.options.height = null;\n            }\n\n            that.timeView = timeView = new TimeView(extend({}, options, {\n                id: element.attr(ID),\n                anchor: that.wrapper,\n                format: options.format,\n                change: function(value, trigger) {\n                    if (trigger) {\n                        that._change(value);\n                    } else {\n                        element.val(value);\n                    }\n                },\n                open: function(e) {\n                    if (that.options.timeView && that.options.timeView.list !== \"scroll\") {\n                        that.timeView._adjustListWidth();\n                    } else {\n                        that.timeView._updateTitle();\n                    }\n\n                    if (that.trigger(OPEN)) {\n                        e.preventDefault();\n                    } else {\n                        element.attr(ARIA_EXPANDED, true);\n                        ul.attr(ARIA_HIDDEN, false);\n\n                        if (timeView.current()) {\n                            element.attr(ARIA_ACTIVEDESCENDANT, timeView._optionID);\n                        }\n                    }\n                },\n                close: function(e) {\n                    if (that.trigger(CLOSE)) {\n                        e.preventDefault();\n                    } else {\n                        element.attr(ARIA_EXPANDED, false);\n                        ul.attr(ARIA_HIDDEN, true);\n                        element[0].removeAttribute(ARIA_ACTIVEDESCENDANT);\n                    }\n                },\n                active: function(current) {\n                    if(element && element.length) {\n                        element[0].removeAttribute(ARIA_ACTIVEDESCENDANT);\n                    }\n                    if (current) {\n                        element.attr(ARIA_ACTIVEDESCENDANT, timeView._optionID);\n                    }\n                },\n                specifiedRange: that._specifiedRange,\n                maxSet: +options.max != +TODAY\n            }));\n            ul = timeView.ul;\n\n            that._icon();\n            that._reset();\n\n            try {\n                element[0].setAttribute(\"type\", \"text\");\n            } catch(e) {\n                element[0].type = \"text\";\n            }\n\n            element.addClass(\"k-input-inner\")\n                   .attr({\n                        \"role\": \"combobox\",\n                        \"aria-expanded\": false,\n                        \"aria-owns\": timeView._timeViewID,\n                        \"autocomplete\": \"off\"\n                   });\n\n            disabled = element.is(\"[disabled]\") || $(that.element).parents(\"fieldset\").is(':disabled');\n            if (disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(element.is(\"[readonly]\"));\n            }\n            if (options.dateInput) {\n                var min = options.min;\n                var max = options.max;\n                var today = new DATE();\n                if (getMilliseconds(min) == getMilliseconds(max)) {\n                    min = new DATE(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0);\n                    max = new DATE(today.getFullYear(), today.getMonth(), today.getDate(), 24, 0, 0);\n                }\n\n                that._dateInput = new ui.DateInput(element, {\n                    culture: options.culture,\n                    format: options.format,\n                    min: min,\n                    max: max,\n                    value: options.value,\n                    interval: options.interval,\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    rounded: options.rounded\n                });\n            }\n            that._old = that._update(options.value || that.element.val());\n            that._oldText = element.val();\n            that._applyCssClasses();\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: \"TimePicker\",\n            min: TODAY,\n            max: TODAY,\n            format: \"\",\n            dates: [],\n            parseFormats: [],\n            value: null,\n            interval: 30,\n            height: 200,\n            animation: {},\n            dateInput: false,\n            messages: {\n                set: \"Set\",\n                cancel: \"Cancel\",\n                hour: \"hour\",\n                minute: \"minute\",\n                second: \"second\",\n                millisecond: \"millisecond\",\n                now: \"Now\"\n            },\n            componentType: \"classic\",\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\"\n        },\n\n        events: [\n         OPEN,\n         CLOSE,\n         CHANGE\n        ],\n\n        componentTypes: {\n            \"classic\": {\n                timeView: {\n                    list: \"list\"\n                }\n            },\n            \"modern\": {\n                timeView: {\n                    list: \"scroll\"\n                }\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            var value = that._value;\n\n            Widget.fn.setOptions.call(that, options);\n            options = that.options;\n\n            if (+options.max != +TODAY || +options.min != +TODAY) {\n                this._specifiedRange = true;\n            }\n\n            that._arrow.off(ns);\n            that._arrow.remove();\n\n            normalize(options);\n\n            that.timeView.setOptions(options);\n\n            that._icon();\n            that._editable(options);\n\n            if (value) {\n                that.element.val(kendo.toString(value, options.format, options.culture));\n            }\n        },\n\n        dataBind: function(dates) {\n            if (isArray(dates)) {\n                this.timeView.dataBind(dates);\n            }\n        },\n\n        _editable: function(options) {\n            var that = this,\n                disable = options.disable,\n                readonly = options.readonly,\n                arrow = that._arrow.off(ns),\n                element = that.element.off(ns),\n                wrapper = that.wrapper.off(ns);\n\n            if (that._dateInput) {\n                that._dateInput._unbindInput();\n            }\n\n            if (!readonly && !disable) {\n                wrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                if(element && element.length) {\n                    element[0].removeAttribute(DISABLED);\n                    element[0].removeAttribute(READONLY);\n                }\n                element.attr(ARIA_DISABLED, false)\n                       .attr(ARIA_READONLY, false)\n                       .on(\"keydown\" + ns, that._keydown.bind(that))\n                       .on(\"focusout\" + ns, that._blur.bind(that))\n                       .on(\"focus\" + ns, function() {\n                           that.wrapper.addClass(FOCUSED);\n                       });\n\n                if (that._dateInput) {\n                    that._dateInput._bindInput();\n                }\n               arrow.on(CLICK, that._click.bind(that))\n                   .on(MOUSEDOWN, preventDefault);\n            } else {\n                wrapper\n                    .addClass(disable ? STATEDISABLED : \"\")\n                    .removeClass(disable ? \"\" : STATEDISABLED);\n\n                element.attr(DISABLED, disable)\n                       .attr(READONLY, readonly)\n                       .attr(ARIA_DISABLED, disable)\n                       .attr(ARIA_READONLY, readonly);\n            }\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.timeView.destroy();\n\n            that.element.off(ns);\n            that._arrow.off(ns);\n            that.wrapper.off(ns);\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n        },\n\n        close: function() {\n            this.timeView.close();\n        },\n\n        open: function() {\n            this.timeView.open();\n        },\n\n        min: function (value) {\n            if (value) {\n                this._specifiedRange = true;\n            }\n\n            return this._option(\"min\", value);\n        },\n\n        max: function (value) {\n            if (value && this.timeView) {\n                this._specifiedRange = true;\n                this.timeView.options.maxSet = true;\n            } else if (this.timeView) {\n                this.timeView.options.maxSet = false;\n            }\n            return this._option(\"max\", value);\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            that._old = that._update(value);\n\n            if (that._old === null) {\n                that.element.val(\"\");\n            }\n\n            that._oldText = that.element.val();\n        },\n\n        _blur: function() {\n            var that = this,\n                value = that.element.val();\n\n           if (!(that.options.timeView && that.options.timeView.list === \"scroll\")) {\n               that.close();\n           }\n\n            if (value !== that._oldText) {\n                that._change(value);\n            }\n            that.wrapper.removeClass(FOCUSED);\n        },\n\n        _click: function() {\n            var that = this,\n                element = that.element;\n\n            that.timeView.toggle();\n\n            if (!support.touch && element[0] !== activeElement()) {\n                element.trigger(\"focus\");\n            }\n        },\n\n        _change: function(value) {\n            var that = this,\n            oldValue = that.element.val(),\n            dateChanged;\n\n            value = that._update(value);\n            dateChanged = !kendo.calendar.isEqualDate(that._old, value);\n\n            var valueUpdated = dateChanged && !that._typing;\n            var textFormatted = oldValue !== that.element.val();\n\n            if (valueUpdated || textFormatted) {\n                that.element.trigger(CHANGE);\n            }\n\n            if (dateChanged) {\n                that._old = value;\n                that._oldText = that.element.val();\n\n                that.trigger(CHANGE);\n            }\n\n            that._typing = false;\n        },\n\n        _icon: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                arrow;\n\n            arrow = element.next(\"button.k-input-button\");\n\n            if (!arrow[0]) {\n                arrow = $(html.renderButton('<button unselectable=\"on\" tabindex=\"-1\" class=\"k-input-button\" aria-label=\"select\"></button>', {\n                    icon: \"clock\",\n                    size: options.size,\n                    fillMode: options.fillMode,\n                    shape: null,\n                    rounded: null\n                })).insertAfter(element);\n            }\n\n            that._arrow = arrow.attr({\n                \"role\": \"button\",\n                \"aria-controls\": that.timeView._timeViewID\n            });\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                timeView = that.timeView,\n                value = that.element.val();\n\n            if (timeView.popup.visible() || e.altKey) {\n                timeView.move(e);\n                if (that._dateInput && e.stopImmediatePropagation) {\n                    e.stopImmediatePropagation();\n                }\n            } else if (key === keys.ENTER && value !== that._oldText) {\n                that._change(value);\n            } else {\n                that._typing = true;\n            }\n        },\n\n        _option: function(option, value) {\n            var that = this,\n                options = that.options;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = that.timeView._parse(value);\n\n            if (!value) {\n                return;\n            }\n\n            value = new DATE(+value);\n\n            options[option] = value;\n            that.timeView.options[option] = value;\n            that.timeView.bind();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _update: function(value) {\n            var that = this,\n                options = that.options,\n                timeView = that.timeView,\n                date = timeView._parse(value);\n\n            if (!isInRange(date, options.min, options.max)) {\n                date = null;\n            }\n\n            that._value = date;\n            that._currentlySelected = date;\n            if (that._dateInput && date) {\n                that._dateInput.value(date || value);\n            } else {\n                that.element.val(kendo.toString(date || value, options.format, options.culture));\n            }\n            timeView.value(date);\n\n            return date;\n        },\n\n        _wrapper: function() {\n            var that = this,\n                element = that.element,\n                wrapper;\n\n            wrapper = element.parents(\".k-timepicker\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap(SPAN).parent();\n            }\n\n            wrapper[0].style.cssText = element[0].style.cssText;\n            that.wrapper = wrapper.addClass(\"k-timepicker k-input\")\n                .addClass(element[0].className);\n\n            element.css({\n                height: element[0].style.height\n            });\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    that.value(element[0].defaultValue);\n                    that.max(that._initialOptions.max);\n                    that.min(that._initialOptions.min);\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        }\n    });\n\n    function normalize(options) {\n        var parseFormats = options.parseFormats;\n\n        options.format = extractFormat(options.format || kendo.getCulture(options.culture).calendars.standard.patterns.t);\n\n        parseFormats = isArray(parseFormats) ? parseFormats : [parseFormats];\n        parseFormats.splice(0, 0, options.format);\n        options.parseFormats = parseFormats;\n    }\n\n    function preventDefault(e) {\n        e.preventDefault();\n    }\n\n    function mergeDateAndTime(date, time) {\n        return new Date(date.getFullYear(),\n            date.getMonth(),\n            date.getDate(),\n            time.getHours(),\n            time.getMinutes(),\n            time.getSeconds(),\n            time.getMilliseconds());\n    }\n\n    function datePattern(format, info) {\n        var calendar = info.calendar;\n        var result;\n        if (typeof format === \"string\") {\n            if (calendar.patterns[format]) {\n                result = calendar.patterns[format];\n            } else {\n                result = format;\n            }\n        }\n\n        if (!result) {\n            result = calendar.patterns.d;\n        }\n\n        return result;\n    }\n\n    function addLiteral(parts, value) {\n        var lastPart = parts[parts.length - 1];\n        if (lastPart && lastPart.type === \"LITERAL\") {\n            lastPart.pattern += value;\n        } else {\n            parts.push({\n                type: LITERAL,\n                pattern: value\n            });\n        }\n    }\n\n    function isHour12(pattern) {\n        return pattern === \"h\" || pattern === \"K\";\n    }\n\n    function dateNameType(formatLength) {\n        var nameType;\n        if (formatLength <= 3) {\n            nameType = \"abbreviated\";\n        } else if (formatLength === 4) {\n            nameType = \"wide\";\n        } else if (formatLength === 5) {\n            nameType = \"narrow\";\n        } else if (formatLength === 6) {\n            nameType = \"short\";\n        }\n\n        return nameType;\n    }\n\n    function startsWith(text, searchString, position) {\n        position = position || 0;\n        return text.indexOf(searchString, position) === position;\n    }\n\n    function includes(text, subStr) {\n        var returnValue = false;\n\n        if (text.indexOf(subStr) !== -1) {\n            returnValue = true;\n        }\n\n        return returnValue;\n    }\n\n    function splitDateFormat(format) {\n        var info = kendo.culture();\n        var pattern = datePattern(format, info);\n        var parts = [];\n        var lastIndex = dateFormatRegExp.lastIndex = 0;\n        var match = dateFormatRegExp.exec(pattern);\n        var specifier;\n        var type;\n        var part;\n        var names;\n        var minLength;\n        var patternLength;\n\n        while (match) {\n            var value = match[0];\n\n            if (lastIndex < match.index) {\n                addLiteral(parts, pattern.substring(lastIndex, match.index));\n            }\n\n            if (startsWith(value, '\"') || startsWith(value, \"'\")) {\n                addLiteral(parts, value);\n            } else {\n                specifier = value[0];\n                type = DATE_FIELD_MAP[specifier];\n                part = {\n                    type: type,\n                    pattern: value\n                };\n\n                if (type === \"hour\") {\n                    part.hour12 = isHour12(value);\n                }\n\n                names = NAME_TYPES[type];\n\n                if (names) {\n                    minLength = typeof names.minLength === \"number\" ? names.minLength : names.minLength[specifier];\n                    patternLength = value.length;\n\n                    if (patternLength >= minLength) {\n                        part.names = {\n                            type: names.type,\n                            nameType: dateNameType(patternLength),\n                            standAlone: names.standAlone === specifier\n                        };\n                    }\n                }\n\n                parts.push(part);\n            }\n\n            lastIndex = dateFormatRegExp.lastIndex;\n            match = dateFormatRegExp.exec(pattern);\n        }\n\n        if (lastIndex < pattern.length) {\n            addLiteral(parts, pattern.substring(lastIndex));\n        }\n\n        return parts;\n    }\n\n    function pad(value, size) {\n        var s = String(value);\n        while (s.length < (size || 2)) {\n            s = \"0\" + s;\n        }\n        return s;\n    }\n\n    function firstItemIndex(scrollTop, itemHeight) {\n        return Math.max(Math.round(scrollTop / itemHeight), 0);\n    }\n\n    function getItemHeight (item){\n        return item.length && item[0].getBoundingClientRect().height;\n    }\n\n    function scrollIntoViewIfNeeded(element, centerIfNeeded) {\n\n        function makeRange(start, length) {\n            return {start: start, length: length, end: start + length};\n        }\n\n        function coverRange(inner, outer) {\n            if (false === centerIfNeeded ||\n                (outer.start < inner.end && inner.start < outer.end))\n            {\n                return Math.min(\n                    inner.start, Math.max(outer.start, inner.end - outer.length)\n                );\n            }\n            return (inner.start + inner.end - outer.length) / 2;\n        }\n\n        function makePoint(x, y) {\n            return {\n                x: x, y: y,\n                translate: function translate(dX, dY) {\n                    return makePoint(x + dX, y + dY);\n                }\n            };\n        }\n\n        function absolute(elem, pt) {\n            while (elem) {\n                pt = pt.translate(elem.offsetLeft, elem.offsetTop);\n                elem = elem.offsetParent;\n            }\n            return pt;\n        }\n\n        var target = absolute(element, makePoint(0, 0)),\n            extent = makePoint(element.offsetWidth, element.offsetHeight),\n            elem = element.parentNode,\n            origin;\n\n        while (elem instanceof HTMLElement) {\n            origin = absolute(elem, makePoint(elem.clientLeft, elem.clientTop));\n            elem.scrollLeft = coverRange(\n                makeRange(target.x - origin.x, extent.x),\n                makeRange(elem.scrollLeft, elem.clientWidth)\n            );\n            elem.scrollTop = coverRange(\n                makeRange(target.y - origin.y, extent.y),\n                makeRange(elem.scrollTop, elem.clientHeight)\n            );\n\n            target = target.translate(-elem.scrollLeft, -elem.scrollTop);\n            elem = elem.parentNode;\n        }\n    }\n\n\n    kendo.cssProperties.registerPrefix(\"TimePicker\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"TimePicker\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    ui.plugin(TimePicker);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3){ (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","keys","html","parse","parseDate","activeElement","_activeElement","extractFormat","_extractFormat","support","browser","ui","Widget","OPEN","CLOSE","CHANGE","ns","CLICK","DISABLED","READONLY","LI","SPAN","FOCUSED","HOVER","HOVEREVENTS","MOUSEDOWN","MS_PER_MINUTE","MS_PER_DAY","SELECTED","STATEDISABLED","ARIA_SELECTED","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_DISABLED","ARIA_READONLY","ARIA_ACTIVEDESCENDANT","ID","isArray","Array","extend","DATE","Date","dateFormatRegExp","LITERAL","MONTH","HOUR","ZONE","WEEKDAY","QUARTER","DATE_FIELD_MAP","G","y","q","Q","M","L","d","E","c","e","h","H","k","K","m","s","a","x","X","z","Z","NAME_TYPES","month","type","minLength","standAlone","quarter","weekday","dayperiod","era","TODAY","MODERN_RENDERING_TEMPLATE","NEW_RENDERING_FOOTER","HIGHLIGHTCONTAINER","TimeView","getFullYear","getMonth","getDate","options","that","this","_dates","_createList","timeView","list","_timeViewID","_optionID","ul","attr","_heightHandler","_height","bind","_ariaLabel","_popup","dst","today","midnight","noon","getTimezoneOffset","getMilliseconds","date","getHours","getMinutes","getSeconds","lastTimeOption","interval","setMinutes","isInRange","value","min","max","msMin","msMax","msValue","prototype","scroll","_createScrollList","_createClassicRenderingList","templateOptions","mainSize","getValidCssClass","size","buttonSize","template","on","preventDefault","omitPopup","append","find","_nowClickHandler","_cancelClickHandler","_setClickHandler","_mouseOverHandler","_scrollerKeyDownHandler","inputElm","labelElm","ariaLabel","ariaLabelledBy","labelId","length","guid","key","keyCode","currentTarget","lists","index","isRtl","wrapper","itemHeight","getItemHeight","eq","container","RIGHT","LEFT","_focusList","UP","scrollTop","DOWN","ENTER","ESC","removeClass","addClass","trigger","_scrollTop","listParent","css","overflow","kineticScrollNeeded","_click","useWithBlock","current","candidate","active","_current","removeAttribute","_updateTitle","toString","_value","format","culture","applyValue","is12hourFormat","includes","toLowerCase","hours","minutes","seconds","designator","indexAttr","hoursList","minutessList","secondsList","designatorList","_internalScroll","_scrollListToPosition","item","pad","close","popup","destroy","off","open","popupHovered","firstChild","_hovered","setTimeout","dataBind","dates","idx","_html","refresh","offset","ignoreDST","parsedValue","mergeDateAndTime","msLastTime","msInterval","start","useValueToRender","startDate","msStart","_createListContent","splitDateFormat","getDatesInRange","forEach","_showAllHiddenItems","items","i","show","_updateListBottomOffset","listHeight","outerHeight","bottomOffset","height","_updateHoursRange","minHours","_minHours","maxHours","_maxHours","useMax","useMin","selectedDesignator","_findSelectedValue","each","_","_validateMin","_validateMax","hide","_updateMinutesRange","minutesList","minMinutes","_minMinutes","maxMinutes","_maxMinutes","selectedHour","_updateSecondsRange","minSeconds","_minSeconds","maxSeconds","selectedMinutes","_updateDesignatorRange","_updateRanges","specifiedRange","_currentlySelected","validateDate","_maxSeconds","addTranslate","topOffset","translate","transform","-ms-transform","_itemClickHandler","_listScrollHandler","now","change","_scrollingTimeout","clearTimeout","_updateCurrentlySelected","selectedSeconds","is","setHours","setSeconds","firstOccurence","firstItemIndex","originalEvent","result","push","setTime","getTime","maxSet","parts","part","values","_literalTemplate","_getValues","_itemTemplate","messages","title","shouldPad","end","hour12","pattern","innerHTML","unbind","one","select","scrollIntoViewIfNeeded","li","selection","text","grep","childNodes","node","textContent","innerText","_distinctSelection","currentValue","selectionIndex","inArray","children","setOptions","old","toggle","visible","isDefaultPrevented","parent","add","scrollHeight","_parse","parseFormats","_adjustListWidth","width","style","anchor","computedStyle","computedWidth","outerWidth","_outerWidth","data","getComputedStyle","parseFloat","mozilla","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","Popup","animation","activate","appendTo","timeDiv","move","down","altKey","nextSibling","previousSibling","lastChild","TAB","TimePicker","init","element","disabled","componentType","fn","call","_specifiedRange","normalize","_initialOptions","_wrapper","_change","val","_icon","_reset","setAttribute","role","aria-expanded","aria-owns","autocomplete","parents","enable","readonly","dateInput","_dateInput","DateInput","fillMode","rounded","_old","_update","_oldText","_applyCssClasses","notify","set","cancel","hour","minute","second","millisecond","events","componentTypes","classic","modern","_arrow","remove","_editable","disable","arrow","_unbindInput","_toggleHover","_keydown","_blur","_bindInput","_form","_resetHandler","_option","touch","oldValue","dateChanged","calendar","isEqualDate","valueUpdated","_typing","textFormatted","next","renderButton","icon","shape","insertAfter","aria-controls","stopImmediatePropagation","option","toggleClass","wrap","cssText","className","formId","form","closest","defaultValue","getCulture","calendars","standard","patterns","t","splice","time","datePattern","info","addLiteral","lastPart","isHour12","dateNameType","formatLength","nameType","startsWith","searchString","position","indexOf","subStr","returnValue","lastIndex","match","exec","specifier","names","patternLength","substring","String","Math","round","getBoundingClientRect","centerIfNeeded","makeRange","coverRange","inner","outer","makePoint","dX","dY","absolute","elem","pt","offsetLeft","offsetTop","offsetParent","target","extent","offsetWidth","offsetHeight","parentNode","origin","HTMLElement","clientLeft","clientTop","scrollLeft","clientWidth","clientHeight","cssProperties","registerPrefix","registerValues","prop","roundedValues","concat","plugin","amd","a1","a2","a3"],"mappings":"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"}