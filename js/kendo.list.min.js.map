{"version":3,"file":"kendo.list.min.js","sources":["kendo.list.js"],"sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function(f, define) {\n    define('kendo.list',[ \"./kendo.data\", \"./kendo.popup\" ], f);\n})(function() {\n\nvar __meta__ = { // jshint ignore:line\n    id: \"list\",\n    name: \"List\",\n    category: \"framework\",\n    depends: [ \"data\", \"popup\" ],\n    hidden: true\n};\n\n/*jshint evil: true*/\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        outerHeight = kendo._outerHeight,\n        percentageUnitsRegex = /^\\d+(\\.\\d+)?%$/i,\n        Widget = ui.Widget,\n        keys = kendo.keys,\n        support = kendo.support,\n        htmlEncode = kendo.htmlEncode,\n        activeElement = kendo._activeElement,\n        outerWidth = kendo._outerWidth,\n        ObservableArray = kendo.data.ObservableArray,\n        ID = \"id\",\n        CHANGE = \"change\",\n        FOCUSED = \"k-focus\",\n        HOVER = \"k-hover\",\n        KSELECTED = \"k-selected\",\n        LOADING = \"k-i-loading\",\n        LIST = \"k-list\",\n        TABLE = \"k-table\",\n        DATA_TABLE = \"k-data-table\",\n        TABLE_MD = \"k-table-md\",\n        LIST_UL = \"k-list-ul\",\n        TABLE_LIST = \"k-table-list\",\n        FIXED_GROUP_HEADER = \".k-list-group-sticky-header\",\n        GROUP_LABEL = \".k-list-item-group-label\",\n        ITEMSELECTOR = \".k-list-item\",\n        LABELIDPART = \"_label\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CASCADE = \"cascade\",\n        SELECT = \"select\",\n        CLICK = \"click\",\n        MOUSELEAVE = \"mouseleave\",\n        MOUSEENTER = \"mouseenter\",\n        ACTIVATE = \"activate\",\n        DEACTIVATE = \"deactivate\",\n        DATA_BINDING = \"dataBinding\",\n        DATA_BOUND = \"dataBound\",\n        SELECTED_ITEM_CHANGE = \"selectedItemChange\",\n        SELECTED = \"selected\",\n        REQUESTSTART = \"requestStart\",\n        REQUESTEND = \"requestEnd\",\n        BLUR = \"blur\",\n        FOCUS = \"focus\",\n        FOCUSOUT = \"focusout\",\n        extend = $.extend,\n        isArray = Array.isArray,\n        browser = support.browser,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        TEXT = \"text\",\n        VALUE = \"value\",\n        isIE = browser.msie,\n        quotRegExp = /\"/g,\n        alternativeNames = {\n            \"ComboBox\": [ \"DropDownList\", \"MultiColumnComboBox\" ],\n            \"DropDownList\": [ \"ComboBox\", \"MultiColumnComboBox\" ],\n            \"MultiColumnComboBox\": [ \"ComboBox\", \"DropDownList\" ]\n        },\n\n        UL_EL = '<ul unselectable=\"on\"/>',\n        LIST_EL = \"<div class='k-list'/>\",\n        NO_DATA_EL = '<div class=\"k-no-data\" style=\"display: none;\"></div>',\n        LIST_FOOTER_EL = '<div class=\"k-list-footer\"></div>',\n        TABLE_FOOTER_EL = '<div class=\"k-table-footer\">' +\n                '<span class=\"k-table-td\"></span>' +\n            '</div>',\n        MOUSEDOWN = \"mousedown\",\n        LIST_SUFFIX = \"-list\",\n        LISTBOX_SUFFIX = \"_listbox\",\n        ARIA_LABELLEDBY = \"aria-labelledby\",\n        ARIA_LABEL = \"aria-label\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        ARIA_AUTOCOMPLETE = \"aria-autocomplete\",\n        ARIA_CONTROLS = \"aria-controls\",\n        ARIA_LIVE = \"aria-live\",\n        ARIA_EXPANDED = \"aria-expanded\",\n        ARIA_HIDDEN = \"aria-hidden\",\n        ARIA_BUSY = \"aria-busy\",\n        ARIA_MULTISELECTABLE = \"aria-multiselectable\",\n        ARIA_SELECTED = \"aria-selected\",\n        GROUP_ROW_SEL = \".k-table-group-row\";\n\n    var List = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this,\n                id;\n\n            Widget.fn.init.call(that, element, options);\n            element = that.element;\n            options = that.options;\n\n            that._isSelect = element.is(SELECT);\n\n            if (that._isSelect && that.element[0].length) {\n                if (!options.dataSource) {\n                    options.dataTextField = options.dataTextField || TEXT;\n                    options.dataValueField = options.dataValueField || VALUE;\n                }\n            }\n\n            that._listSize = kendo.cssProperties.getValidClass({\n                widget: \"List\",\n                propName: \"size\",\n                value: options.size\n            });\n\n            that.ul = $(UL_EL).attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            that.list = $(LIST_EL)\n                .addClass(that._listSize)\n                .append(that.ul);\n\n            id = element.attr(ID);\n\n            if (!id) {\n                id = kendo.guid();\n            }\n\n            that.list.attr(ID, id + LIST_SUFFIX);\n            that.ul.attr(ID, id + LISTBOX_SUFFIX);\n\n            if (options.columns && options.columns.length) {\n                that.list.removeClass(LIST).addClass(DATA_TABLE);\n                that.list.removeClass(that._listSize).addClass(TABLE_MD);\n\n                that.ul.removeClass(LIST_UL).addClass(TABLE);\n\n                that._columnsHeader();\n            }\n\n            that._header();\n            that._noData();\n            that._footer();\n            that._accessors();\n            that._initValue();\n        },\n\n        options: {\n            valuePrimitive: false,\n            footerTemplate: \"\",\n            headerTemplate: \"\",\n            noDataTemplate: true,\n            size: \"medium\",\n            messages: {\n                \"noData\": \"No data found.\",\n                \"clear\": \"clear\"\n            }\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            if (options && options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (options.columns && options.columns.length) {\n                this._columnsHeader();\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n        },\n\n        focus: function() {\n            this._focused.trigger(FOCUS);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined ? true : readonly,\n                disable: false\n            });\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined ? true : enable)\n            });\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            this._angularElement(header, \"cleanup\");\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n\n            if (list.list.parent.length > 0) {\n                list.list.before(header);\n            }\n\n            this._angularElement(list.header, \"compile\");\n        },\n\n        _columnsHeader: function() {\n            var list = this;\n            var columnsHeader = $(list.columnsHeader);\n\n            this._angularElement(columnsHeader, \"cleanup\");\n            kendo.destroy(columnsHeader);\n            columnsHeader.remove();\n\n            var header = \"<div class='k-table-header'><div class='k-table-header-wrap'><table class='k-table' role='presentation'>\";\n            var colGroup = \"<colgroup>\";\n            var row = \"<tr class='k-table-row'>\";\n\n            for (var idx = 0; idx < this.options.columns.length; idx++) {\n                var currentColumn = this.options.columns[idx];\n                var title = currentColumn.title || currentColumn.field || \"\";\n                var template = currentColumn.headerTemplate || title;\n                var columnsHeaderTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n                var currentWidth = currentColumn.width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n\n                colGroup += \"<col \" + widthStyle + \"/>\";\n\n                row += \"<th class='k-table-th'>\";\n                row += columnsHeaderTemplate(currentColumn);\n                row += \"</th>\";\n            }\n            colGroup += \"</colgroup>\";\n            row += \"</tr>\";\n            header += colGroup;\n            header += \"<thead class='k-table-thead'>\";\n            header += row;\n            header += \"</thead></table></div></div>\";\n\n            list.columnsHeader = columnsHeader = $(header);\n            list.list.prepend(columnsHeader);\n\n            this._angularElement(list.columnsHeader, \"compile\");\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? list.options.messages.noData : list.options.noDataTemplate;\n\n            list.angular(\"cleanup\", function() { return { elements: noData }; });\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $(NO_DATA_EL).appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n            var footerEl = this.options.columns && this.options.columns.length ? TABLE_FOOTER_EL : LIST_FOOTER_EL;\n\n            this._angularElement(footer, \"cleanup\");\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $(footerEl).appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _listOptions: function(options) {\n            var that = this;\n            var currentOptions = that.options;\n            var virtual = currentOptions.virtual;\n            var changeEventOption = { change: that._listChange.bind(that) };\n            var listBoundHandler = that._listBound.bind(that);\n            var focusedElm = that._focused;\n            var inputId = that.element.attr(\"id\");\n            var labelElm = $(\"label[for=\\\"\" + that.element.attr(\"id\") + \"\\\"]\");\n            var labelledBy = focusedElm.attr(ARIA_LABELLEDBY);\n\n            if (!labelledBy && labelElm.length) {\n                labelledBy = labelElm.attr(\"id\") || that._generateLabelId(labelElm, inputId || kendo.guid());\n            }\n\n            virtual = typeof virtual === \"object\" ? virtual : {};\n\n            options = $.extend({\n                autoBind: false,\n                selectable: true,\n                dataSource: that.dataSource,\n                click: that._click.bind(that),\n                activate: that._activateItem.bind(that),\n                columns: currentOptions.columns,\n                deactivate: that._deactivateItem.bind(that),\n                dataBinding: function() {\n                    that.trigger(DATA_BINDING);\n                },\n                dataBound: listBoundHandler,\n                height: currentOptions.height,\n                dataValueField: currentOptions.dataValueField,\n                dataTextField: currentOptions.dataTextField,\n                groupTemplate: currentOptions.groupTemplate,\n                fixedGroupTemplate: currentOptions.fixedGroupTemplate,\n                template: currentOptions.template,\n                ariaLabel: focusedElm.attr(ARIA_LABEL),\n                ariaLabelledBy: labelledBy,\n                listSize: that._listSize\n            }, options, virtual, changeEventOption);\n\n            if (!options.template) {\n                options.template = \"#:\" + kendo.expr(options.dataTextField, \"data\") + \"#\";\n            }\n\n            if (currentOptions.$angular) {\n                options.$angular = currentOptions.$angular;\n            }\n\n            return options;\n        },\n\n        _initList: function() {\n            var that = this;\n            var listOptions = that._listOptions({\n                selectedItemChange: that._listChange.bind(that)\n            });\n\n            if (!that.options.virtual) {\n                that.listView = new kendo.ui.StaticList(that.ul, listOptions);\n            } else {\n                that.listView = new kendo.ui.VirtualList(that.ul, listOptions);\n                that.list.addClass(\"k-virtual-list\");\n            }\n\n            that.listView.bind(\"listBound\", that._listBound.bind(that));\n            that._setListValue();\n        },\n\n        _setListValue: function(value) {\n            value = value || this.options.value;\n\n            if (value !== undefined) {\n                this.listView.value(value)\n                    .done(this._updateSelectionState.bind(this));\n            }\n        },\n\n        _updateSelectionState: $.noop,\n\n        _listMousedown: function(e) {\n            if (!this.filterInput || this.filterInput[0] !== e.target) {\n                e.preventDefault();\n            }\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _hideClear: function() {\n            var list = this;\n\n            if (list._clear) {\n                list._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _clearValue: function() {\n            this._clearText();\n            this._accessor(\"\");\n            this.listView.value([]);\n\n            if (this._isSelect) {\n                this._customOption = undefined;\n            }\n\n            if (this._isFilterEnabled() && !this.options.enforceMinLength) {\n                this._filter({ word: \"\", open: false });\n\n                if (this.options.highlightFirst) {\n                    this.listView.focus(0);\n                }\n            }\n            this._change();\n        },\n\n        _clearText: function() {\n            this.text(\"\");\n        },\n\n        _clearFilter: function() {\n            if (!this.options.virtual) {\n                this.listView.bound(false);\n            }\n\n            this._filterSource();\n        },\n\n        _filterSource: function(filter, force) {\n            var that = this;\n            var options = that.options;\n            var isMultiColumnFiltering = options.filterFields && filter && filter.logic && filter.filters && filter.filters.length;\n            var dataSource = that.dataSource;\n            var expression = extend({}, dataSource.filter() || {});\n            var resetPageSettings = filter || (expression.filters && expression.filters.length && !filter);\n\n            var removed = removeFiltersForField(expression, options.dataTextField);\n\n            this._clearFilterExpressions(expression);\n\n            if ((filter || removed) && that.trigger(\"filtering\", { filter: filter })) {\n                return $.Deferred().reject().promise();\n            }\n\n            var newExpression = {\n                filters: [],\n                logic: \"and\"\n            };\n\n            if (isMultiColumnFiltering) {\n                newExpression.filters.push(filter);\n            } else {\n                this._pushFilterExpression(newExpression, filter);\n            }\n\n            if (isValidFilterExpr(expression)) {\n                if (newExpression.logic === expression.logic) {\n                    newExpression.filters = newExpression.filters.concat(expression.filters);\n                } else {\n                    newExpression.filters.push(expression);\n                }\n            }\n\n            if (that._cascading) {\n                this.listView.setDSFilter(newExpression);\n            }\n\n            var dataSourceState = extend({}, {\n                page: resetPageSettings ? 1 : dataSource.page(),\n                pageSize: resetPageSettings ? dataSource.options.pageSize : dataSource.pageSize(),\n                sort: dataSource.sort(),\n                filter: dataSource.filter(),\n                group: dataSource.group(),\n                aggregate: dataSource.aggregate()\n            }, { filter: newExpression });\n\n            return dataSource[force ? \"read\" : \"query\"](dataSource._mergeState(dataSourceState));\n        },\n\n        _pushFilterExpression: function(newExpression, filter) {\n            if (isValidFilterExpr(filter) && filter.value !== \"\") {\n                newExpression.filters.push(filter);\n            }\n        },\n\n        _clearFilterExpressions: function(expression) {\n            if (!expression.filters) {\n                return;\n            }\n\n            var filtersToRemove;\n\n            for (var i = 0; i < expression.filters.length; i++) {\n                if (\"fromFilter\" in expression.filters[i]) {\n                    filtersToRemove = i;\n                }\n            }\n\n            if (!isNaN(filtersToRemove)) {\n                expression.filters.splice(filtersToRemove, 1);\n            }\n        },\n\n        _angularElement: function(element, action) {\n            if (!element) {\n                return;\n            }\n\n            this.angular(action, function() {\n                return { elements: element };\n            });\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            this._angularElement(noData, \"cleanup\");\n            noData.html(list.noDataTemplate({ instance: list }));\n            this._angularElement(noData, \"compile\");\n        },\n\n        _toggleNoData: function(show) {\n            $(this.noData).toggle(show);\n        },\n\n        _toggleHeader: function(show) {\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            groupHeader.toggle(show);\n        },\n\n        _renderFooter: function() {\n            var list = this,\n                footer = list.footer ? this.options.columns && this.options.columns.length ? list.footer.children().first() : list.footer : null;\n\n            if (!footer) {\n                return;\n            }\n\n            this._angularElement(footer, \"cleanup\");\n            footer.html(list.footerTemplate({ instance: list }));\n            this._angularElement(footer, \"compile\");\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.dataSource.flatView().length;\n        },\n\n        _initValue: function() {\n            var that = this,\n                value = that.options.value;\n\n            if (value !== null) {\n                that.element.val(value);\n            } else {\n                value = that._accessor();\n                that.options.value = value;\n            }\n\n            that._old = value;\n        },\n\n        _ignoreCase: function() {\n            var that = this,\n                model = that.dataSource.reader.model,\n                field;\n\n            if (model && model.fields) {\n                field = model.fields[that.options.dataTextField];\n\n                if (field && field.type && field.type !== \"string\") {\n                    that.options.ignoreCase = false;\n                }\n            }\n        },\n\n        _focus: function(candidate) {\n            return this.listView.focus(candidate);\n        },\n\n        _filter: function(options) {\n            var that = this;\n            var widgetOptions = that.options;\n            var word = options.word;\n            var filterFields = widgetOptions.filterFields;\n            var field = widgetOptions.dataTextField;\n            var expression;\n\n            if (filterFields && filterFields.length) {\n                expression = {\n                    logic: \"or\",\n                    filters: [],\n                    fromFilter: true\n                };\n                for (var i = 0; i < filterFields.length; i++) {\n                    this._pushFilterExpression(expression, that._buildExpression(word, filterFields[i]));\n                }\n            } else {\n                expression = that._buildExpression(word, field);\n            }\n\n            that._open = options.open;\n            that._filterSource(expression);\n        },\n\n        _buildExpression: function(value, field) {\n            var that = this;\n            var widgetOptions = that.options;\n            var ignoreCase = widgetOptions.ignoreCase;\n            var accentFoldingFiltering = that.dataSource.options.accentFoldingFiltering;\n\n            return {\n                value: ignoreCase ? (accentFoldingFiltering ? value.toLocaleLowerCase(accentFoldingFiltering) : value.toLowerCase()) : value,\n                field: field,\n                operator: widgetOptions.filter,\n                ignoreCase: ignoreCase\n            };\n        },\n\n        _clearButton: function() {\n            var list = this;\n            var clearTitle = list.options.messages.clear;\n\n            if (!list._clear) {\n                list._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\"><span class=\"k-icon k-i-x\"></span></span>').attr({\n                    \"role\": \"button\",\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (!list.options.clearButton) {\n                list._clear.remove();\n            }\n            this._hideClear();\n        },\n\n        search: function(word) {\n            var options = this.options;\n\n            word = typeof word === \"string\" ? word : this._inputValue();\n\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                this._state = \"filter\";\n                if (this.listView) {\n                    this.listView._emptySearch = !kendo.trim(word).length;\n                }\n\n                if (!this._isFilterEnabled()) {\n                    this._searchByWord(word);\n                } else {\n                    this._filter({ word: word, open: true });\n                }\n            }\n        },\n\n        current: function(candidate) {\n            return this._focus(candidate);\n        },\n\n        items: function() {\n            return this.ul[0].children;\n        },\n\n        destroy: function() {\n            var that = this;\n            var ns = that.ns;\n\n            Widget.fn.destroy.call(that);\n\n            that._unbindDataSource();\n\n            that.listView.destroy();\n            that.list.off(ns);\n\n            that.popup.destroy();\n\n            if (that._form) {\n                that._form.off(\"reset\", that._resetHandler);\n            }\n        },\n\n        dataItem: function(index) {\n            var that = this;\n\n            if (index === undefined) {\n                return that.listView.selectedDataItems()[0];\n            }\n\n            if (typeof index !== \"number\") {\n                if (that.options.virtual) {\n                    return that.dataSource.getByUid($(index).data(\"uid\"));\n                }\n\n                index = $(that.items()).index(index);\n            }\n\n            return that.dataSource.flatView()[index];\n        },\n\n        _activateItem: function() {\n            var current = this.listView.focus();\n            if (current && this.popup.visible()) {\n                this._focused.add(this.filterInput).attr(ARIA_ACTIVEDESCENDANT, current.attr(\"id\"));\n            }\n        },\n\n        _deactivateItem: function() {\n            this._focused.add(this.filterInput).removeAttr(ARIA_ACTIVEDESCENDANT);\n        },\n\n        _accessors: function() {\n            var that = this;\n            var element = that.element;\n            var options = that.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            that._text = getter(options.dataTextField);\n            that._value = getter(options.dataValueField);\n        },\n\n        _aria: function(id) {\n            var that = this,\n                options = that.options,\n                element = that._focused,\n                autocomplete;\n\n            if (options.suggest !== undefined) {\n                if (options.filter === \"none\") {\n                    if (options.suggest === true) {\n                        autocomplete = \"inline\";\n                    } else {\n                        autocomplete = \"none\";\n                    }\n                } else {\n                    if (options.suggest === true) {\n                        autocomplete = \"both\";\n                    } else {\n                        autocomplete = \"list\";\n                    }\n                }\n\n                element.attr(ARIA_AUTOCOMPLETE, autocomplete);\n            }\n\n            id = id ? id + \" \" + that.ul[0].id : that.ul[0].id;\n\n            element.attr({\n                \"aria-owns\": id,\n                \"aria-controls\": id\n            });\n\n            if (that.filterInput && that.filterInput.length > 0) {\n                that.filterInput.attr(ARIA_CONTROLS, id);\n            }\n\n            that.ul.attr(ARIA_LIVE, !that._isFilterEnabled() ? \"off\" : \"polite\");\n\n            that._ariaLabel();\n        },\n\n        _ariaLabel: function() {\n            var that = this;\n            var focusedElm = that._focused;\n            var inputElm = that.element;\n            var inputId = inputElm.attr(\"id\");\n            var labelElm = $(\"label[for=\\\"\" + inputId + \"\\\"]\");\n            var ariaLabel = inputElm.attr(ARIA_LABEL);\n            var ariaLabelledBy = inputElm.attr(ARIA_LABELLEDBY);\n\n            if (focusedElm === inputElm) {\n                return;\n            }\n\n            if (ariaLabel) {\n                focusedElm.attr(ARIA_LABEL, ariaLabel);\n            } else if (ariaLabelledBy) {\n                focusedElm.attr(ARIA_LABELLEDBY, ariaLabelledBy);\n            } else if (labelElm.length) {\n                var labelId = labelElm.attr(\"id\") || that._generateLabelId(labelElm, inputId || kendo.guid());\n                focusedElm.attr(ARIA_LABELLEDBY, labelId);\n            }\n        },\n\n        _generateLabelId: function(label, inputId) {\n            var labelId = inputId + LABELIDPART;\n            label.attr(\"id\", labelId);\n\n            return labelId;\n        },\n\n        _blur: function() {\n            var that = this;\n\n            that._change();\n            that.close();\n            that._userTriggered = false;\n        },\n\n        _isValueChanged: function(value) {\n            return value !== unifyType(this._old, typeof value);\n        },\n\n        _change: function() {\n            var that = this;\n            var index = that.selectedIndex;\n            var optionValue = that.options.value;\n            var value = that.value();\n            var trigger;\n\n            if (that._isSelect && !that.listView.bound() && optionValue) {\n                value = optionValue;\n            }\n\n            if (that._isValueChanged(value)) {\n                trigger = true;\n            } else if (that._valueBeforeCascade !== undefined && that._valueBeforeCascade !== unifyType(that._old, typeof that._valueBeforeCascade) && that._userTriggered) {\n                trigger = true;\n            } else if (index !== undefined && index !== that._oldIndex && !that.listView.isFiltered()) {\n                trigger = true;\n            }\n\n            if (trigger) {\n\n                if (that._old === null || that._old === \"\" || value === \"\") {\n                    that._valueBeforeCascade = that._old = value;\n                } else {\n                    if (that.dataItem()) {\n                        that._valueBeforeCascade = that._old = that.options.dataValueField ? that.dataItem()[that.options.dataValueField] : that.dataItem();\n                    } else {\n                        that._valueBeforeCascade = that._old = null;\n                    }\n                }\n                that._oldIndex = index;\n\n                if (!that._typing) {\n                    // trigger the DOM change event so any subscriber gets notified\n                    that.element.trigger(CHANGE);\n                }\n\n                that.trigger(CHANGE);\n            }\n\n            that.typing = false;\n        },\n\n        _data: function() {\n            return this.dataSource.view();\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _dataValue: function(dataItem) {\n            var value = this._value(dataItem);\n\n            if (value === undefined) {\n                value = this._text(dataItem);\n            }\n\n            return value;\n        },\n\n        _offsetHeight: function() {\n            var offsetHeight = 0;\n            var siblings = this.listView.content.parent().prevAll(\":visible\");\n\n            siblings.each(function() {\n                var element = $(this);\n\n                offsetHeight += outerHeight(element, true);\n            });\n\n            return offsetHeight;\n        },\n\n        _height: function(length) {\n            var that = this;\n            var list = that.list;\n            var height = that.options.height;\n            var visible = that.popup.visible();\n            var isMccb = this.options.columns && this.options.columns.length;\n            var offsetTop, popups;\n\n            if (length || that.options.noDataTemplate) {\n                // Check where animation container stays\n                popups = list.parent().add(list.closest(\".k-animation-container\")).show();\n\n                if (!list.parent().is(\":visible\")) {\n                    popups.hide();\n                    return;\n                }\n\n                height = that.listView.content[0].scrollHeight > height ? height : \"auto\";\n\n                popups.height(height);\n\n                if (height !== \"auto\") {\n                    offsetTop = that._offsetHeight();\n\n                    height = height - offsetTop;\n\n                    if (isMccb) {\n                        height = height - (outerHeight($(that.footer)) || 0) - (outerHeight($(that.columnsHeader)) || 0);\n                    }\n                }\n\n                if (isMccb) {\n                    that.listView.content.outerHeight(height);\n                } else {\n                    that.listView.content.parent().outerHeight(height);\n                }\n\n                if (!visible) {\n                    popups.hide();\n                }\n            }\n\n            return height;\n        },\n\n        _openHandler: function(e) {\n            var current;\n\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, true);\n                this.ul.attr(ARIA_HIDDEN, false);\n\n                current = this.listView.focus();\n                if (current) {\n                    this._focused.add(this.filterInput).attr(ARIA_ACTIVEDESCENDANT, current.attr(\"id\"));\n                }\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list.parent(),\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                this._focused.attr(ARIA_EXPANDED, false);\n                this.ul.attr(ARIA_HIDDEN, true);\n                this._focused.add(this.filterInput).removeAttr(ARIA_ACTIVEDESCENDANT);\n            }\n        },\n\n        _focusItem: function() {\n            var listView = this.listView;\n            var noFocusedItem = !listView.focus();\n            var index = last(listView.select());\n\n            if (index === undefined && this.options.highlightFirst && noFocusedItem) {\n                index = 0;\n            }\n\n            if (index !== undefined) {\n                listView.focus(index);\n            } else if (noFocusedItem) {\n                listView.scrollToIndex(0);\n            }\n        },\n\n        _calculateGroupPadding: function(height) {\n            var li = this.ul.children(\".k-first\").first();\n            var groupHeader = this.listView.content.prev(FIXED_GROUP_HEADER);\n            var padding = 0;\n            var direction = 'right';\n\n            if (groupHeader[0] && groupHeader[0].style.display !== \"none\") {\n                if (height !== \"auto\") {\n                    padding = kendo.support.scrollbar();\n                }\n\n                if (this.element.parents('.k-rtl').length) {\n                    direction = 'left';\n                }\n\n                padding += parseFloat(li.css(\"border-\" + direction + \"-width\"), 10) + parseFloat(li.children(GROUP_LABEL).css(\"padding-\" + direction), 10);\n                groupHeader.css(\"padding-\" + direction, padding);\n            }\n        },\n\n        _calculatePopupHeight: function(force) {\n            var height = this._height(this.dataSource.flatView().length || force);\n            this._calculateGroupPadding(height);\n            this._calculateColumnsHeaderPadding(height);\n        },\n\n        _calculateColumnsHeaderPadding: function(height) {\n            if (this.options.columns && this.options.columns.length) {\n                var list = this;\n                var isRtl = support.isRtl(list.wrapper);\n                var scrollbar = kendo.support.scrollbar();\n\n                list.columnsHeader.css((isRtl ? \"padding-left\" : \"padding-right\"), height !== \"auto\" ? scrollbar : 0);\n            }\n        },\n\n        _refreshScroll: function() {\n            var listView = this.listView;\n            var enableYScroll = listView.element.height() > listView.content.height();\n\n            if (this.options.autoWidth) {\n                listView.content.css({\n                    overflowX: \"hidden\",\n                    overflowY: enableYScroll ? \"scroll\" : \"auto\"\n                });\n            }\n        },\n\n        _resizePopup: function(force) {\n            if (this.options.virtual) {\n                return;\n            }\n\n            if (!this.popup.element.is(\":visible\")) {\n                this.popup.one(\"open\", (function(force) {\n                    return (function() {\n                        this._calculatePopupHeight(force);\n                    }).bind(this);\n                }).call(this, force));\n\n                this.popup.one(ACTIVATE, this._refreshScroll.bind(this));\n            } else {\n                this._calculatePopupHeight(force);\n            }\n        },\n\n        _popup: function() {\n            var list = this;\n\n            list.list.wrap(\"<div>\");\n\n            list.popup = new ui.Popup(list.list.parent(), extend({}, list.options.popup, {\n                anchor: list.wrapper,\n                open: list._openHandler.bind(list),\n                close: list._closeHandler.bind(list),\n                animation: list.options.animation,\n                isRtl: support.isRtl(list.wrapper),\n                autosize: list.options.autoWidth\n            }));\n\n            list.popup.element.prepend(list.header)\n                .on(MOUSEDOWN + this.ns, this._listMousedown.bind(this));\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === MOUSEENTER);\n        },\n\n        _toggle: function(open, preventFocus) {\n            var that = this;\n            var touchEnabled = support.mobileOS && (support.touch || support.MSPointers || support.pointers);\n\n            open = open !== undefined ? open : !that.popup.visible();\n\n            if (!preventFocus && !touchEnabled && that._focused[0] !== activeElement()) {\n                that._prevent = true;\n                that._focused.trigger(FOCUS);\n                that._prevent = false;\n            }\n\n            that[open ? OPEN : CLOSE]();\n        },\n\n        _triggerCascade: function() {\n            var that = this;\n\n            if (!that._cascadeTriggered || that.value() !== unifyType(that._cascadedValue, typeof that.value())) {\n                that._cascadedValue = that.value();\n                that._cascadeTriggered = true;\n                that.trigger(CASCADE, { userTriggered: that._userTriggered });\n            }\n        },\n\n        _triggerChange: function() {\n            if (this._valueBeforeCascade !== this.value()) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _unbindDataSource: function() {\n            var that = this;\n\n            that.dataSource.unbind(REQUESTSTART, that._requestStartHandler)\n                           .unbind(REQUESTEND, that._requestEndHandler)\n                           .unbind(\"error\", that._errorHandler);\n        },\n\n        requireValueMapper: function(options, value) {\n            var hasValue = (options.value instanceof Array ? options.value.length : options.value) || (value instanceof Array ? value.length : value);\n            if (hasValue && options.virtual && typeof options.virtual.valueMapper !== \"function\") {\n                throw new Error(\"ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function\");\n            }\n        }\n    });\n\n    function unifyType(value, type) {\n        if (value !== undefined && value !== \"\" && value !== null) {\n            if (type === \"boolean\") {\n                if (typeof value !== \"boolean\") {\n                    value = value.toString().toLowerCase() === \"true\";\n                }\n                value = Boolean(value);\n            } else if (type === \"number\") {\n                value = Number(value);\n            } else if (type === \"string\") {\n                value = value.toString();\n            }\n        }\n\n        return value;\n    }\n\n    extend(List, {\n        inArray: function(node, parentNode) {\n            var idx, length, siblings = parentNode.children;\n\n            if (!node || node.parentNode !== parentNode) {\n                return -1;\n            }\n\n            for (idx = 0, length = siblings.length; idx < length; idx++) {\n                if (node === siblings[idx]) {\n                    return idx;\n                }\n            }\n\n            return -1;\n        },\n        unifyType: unifyType\n    });\n\n    kendo.ui.List = List;\n\n    ui.Select = List.extend({\n        init: function(element, options) {\n            List.fn.init.call(this, element, options);\n            this._initial = this.element.val();\n        },\n\n        setDataSource: function(dataSource) {\n            var that = this;\n            var parent;\n\n            that.options.dataSource = dataSource;\n\n            that._dataSource();\n\n            if (that.listView.bound()) {\n                that._initialIndex = null;\n                that.listView._current = null;\n            }\n\n            that.listView.setDataSource(that.dataSource);\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            parent = that._parentWidget();\n\n            if (parent) {\n                that._cascadeSelect(parent);\n            }\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        select: function(candidate) {\n            var that = this;\n\n            if (candidate === undefined) {\n                return that.selectedIndex;\n            } else {\n                return that._select(candidate).done(function() {\n                    that._cascadeValue = that._old = that._accessor();\n                    that._oldIndex = that.selectedIndex;\n                });\n            }\n        },\n\n        _accessor: function(value, idx) {\n            return this[this._isSelect ? \"_accessorSelect\" : \"_accessorInput\"](value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _accessorSelect: function(value, idx) {\n            var element = this.element[0];\n            var hasValue;\n\n            if (value === undefined) {\n                return getSelectedOption(element).value || \"\";\n            }\n\n            getSelectedOption(element).selected = false;\n\n            if (idx === undefined) {\n                idx = -1;\n            }\n\n            hasValue = (value !== null && value !== \"\");\n\n            if (hasValue && idx == -1) {\n                this._custom(value);\n            } else {\n                if (value) {\n                    element.value = value;\n                } else {\n                    element.selectedIndex = idx;\n                }\n            }\n        },\n\n        _syncValueAndText: function() {\n            return true;\n        },\n\n        _custom: function(value) {\n            var that = this;\n            var element = that.element;\n            var custom = that._customOption;\n\n            if (!custom) {\n                custom = $(\"<option/>\");\n                that._customOption = custom;\n\n                element.append(custom);\n            }\n\n            custom.text(value);\n            custom[0].selected = true;\n        },\n\n        _hideBusy: function() {\n            var that = this;\n            clearTimeout(that._busy);\n            that._arrowIcon.removeClass(LOADING);\n            that._focused.attr(ARIA_BUSY, false);\n            that._busy = null;\n            that._showClear();\n        },\n\n        _showBusy: function(e) {\n            var that = this;\n\n            if (e.isDefaultPrevented()) {\n                return;\n            }\n\n            that._request = true;\n\n            if (that._busy) {\n                return;\n            }\n\n            that._busy = setTimeout(function() {\n                if (that._arrowIcon) { //destroyed after request start\n                    that._focused.attr(ARIA_BUSY, true);\n                    that._arrowIcon.addClass(LOADING);\n                    that._hideClear();\n                }\n            }, 100);\n        },\n\n        _requestEnd: function() {\n            this._request = false;\n            this._hideBusy();\n        },\n\n        _dataSource: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                dataSource = options.dataSource || {},\n                idx;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that._isSelect) {\n                idx = element[0].selectedIndex;\n                if (idx > -1) {\n                    options.index = idx;\n                }\n\n                dataSource.select = element;\n                dataSource.fields = [{ field: options.dataTextField },\n                                     { field: options.dataValueField }];\n            }\n\n            if (that.dataSource) {\n                that._unbindDataSource();\n            } else {\n                that._requestStartHandler = that._showBusy.bind(that);\n                that._requestEndHandler = that._requestEnd.bind(that);\n                that._errorHandler = that._hideBusy.bind(that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                                   .bind(REQUESTSTART, that._requestStartHandler)\n                                   .bind(REQUESTEND, that._requestEndHandler)\n                                   .bind(\"error\", that._errorHandler);\n        },\n\n        _firstItem: function() {\n            this.listView.focusFirst();\n        },\n\n        _lastItem: function() {\n            this.listView.focusLast();\n        },\n\n        _nextItem: function() {\n            return this.listView.focusNext();\n        },\n\n        _prevItem: function() {\n            return this.listView.focusPrev();\n        },\n\n        _getNormalizedDataItem: function(candidate) {\n            var that = this,\n                listView = that.listView,\n                isIndex = typeof candidate === \"number\",\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                index;\n\n            if (isIndex) {\n                index = hasOptionLabel ? --candidate : candidate;\n            } else {\n                index = listView.getElementIndex(candidate);\n            }\n\n            return listView.dataItemByIndex(index);\n        },\n\n        _getNormalizedSelectCandidate: function(candidate) {\n            var that = this,\n                hasOptionLabel = that.optionLabel && that.optionLabel.length,\n                isIndex = typeof candidate === \"number\",\n                normalizedCandidate = candidate;\n\n            if (hasOptionLabel && isIndex) {\n                normalizedCandidate++;\n            }\n\n            return normalizedCandidate;\n        },\n\n        _move: function(e) {\n            var that = this;\n            var listView = that.listView;\n            var key = e.keyCode;\n            var down = key === keys.DOWN;\n            var isVirtual = that.options.virtual;\n            var dataItem;\n            var pressed;\n            var current;\n            var moveIndex;\n            var selectCandidate;\n\n            if (key === keys.UP || down) {\n                if (e.altKey) {\n                    that.toggle(down);\n                } else {\n                    if (!listView.bound() && !that.ul[0].firstChild) {\n                        if (!that._fetch) {\n                            that.dataSource.one(CHANGE, function() {\n                                that._fetch = false;\n                                that._move(e);\n                            });\n\n                            that._fetch = true;\n                            that._filterSource();\n                        }\n\n                        e.preventDefault();\n\n                        return true; //pressed\n                    }\n\n                    current = that._focus();\n\n                    if (!that._fetch && (!current || current.hasClass(KSELECTED))) {\n                        if (down) {\n                            moveIndex = that._nextItem();\n\n                            if ((isVirtual && moveIndex <= 0) || (!that._focus() && !moveIndex) ) {\n                                that._lastItem();\n                            }\n                        } else {\n                            moveIndex = that._prevItem();\n\n                            if ((isVirtual && moveIndex >= listView.dataSource.total() - 1) || (!that._focus() && !moveIndex)) {\n                                that._firstItem();\n                            }\n                        }\n                    }\n\n                    selectCandidate = that._getNormalizedSelectCandidate(that._get(that._focus()) || moveIndex || 0);\n\n                    that._select(selectCandidate, true).done(function() {\n                        var done = function() {\n                            if (!that.popup.visible()) {\n                                that._blur();\n                            }\n\n                            if (that._cascadedValue === null) {\n                                that._cascadedValue = that.value();\n                            } else {\n                                that._cascadedValue = that.dataItem() ? that.dataItem()[that.options.dataValueField] || that.dataItem() : null;\n                            }\n                        };\n\n                        if (that.trigger(SELECT, { dataItem: that._getNormalizedDataItem(selectCandidate), item: that._focus() })) {\n                            that._select(current).done(done);\n                        } else {\n                            done();\n                        }\n                    });\n                }\n\n                e.preventDefault();\n                pressed = true;\n            } else if (key === keys.ENTER || key === keys.TAB) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n\n                current = that._focus();\n                dataItem = that.dataItem();\n\n                if (!that.popup.visible() && (!dataItem || that.text() !== that._text(dataItem))) {\n                    current = null;\n                }\n\n                var activeFilter = that.filterInput && that.filterInput[0] === activeElement();\n                var selection;\n\n                if (current) {\n                    dataItem = listView.dataItemByIndex(listView.getElementIndex(current));\n                    var shouldTrigger = true;\n\n                    if (dataItem) {\n                        shouldTrigger = that._value(dataItem) !== List.unifyType(that.value(), typeof that._value(dataItem));\n                    }\n\n                    if (shouldTrigger && that.trigger(SELECT, { dataItem: dataItem, item: current })) {\n                        return;\n                    }\n\n                    selection = that._select(current);\n                } else if (that.input) {\n                    if (that._syncValueAndText() || that._isSelect) {\n                        that._accessor(that.input.val());\n                    }\n                    that.listView.value(that.input.val());\n                }\n\n                if (that._focusElement) {\n                    that._focusElement(that.wrapper);\n                }\n\n                if (activeFilter && key === keys.TAB) {\n                    that.wrapper.focusout();\n                } else {\n                    if (selection && typeof selection.done === \"function\") {\n                        selection.done(function() {\n                            that._blur();\n                        });\n                    } else {\n                        that._blur();\n                    }\n                }\n\n                that.close();\n                pressed = true;\n            } else if (key === keys.ESC) {\n                if (that.popup.visible()) {\n                    e.preventDefault();\n                }\n                that.close();\n                pressed = true;\n            } else if (that.popup.visible() && (key === keys.PAGEDOWN || key === keys.PAGEUP)) {\n                e.preventDefault();\n\n                var direction = key === keys.PAGEDOWN ? 1 : -1;\n                listView.scrollWith(direction * listView.screenHeight());\n\n                pressed = true;\n            }\n\n            return pressed;\n        },\n\n        _fetchData: function() {\n            var that = this;\n            var hasItems = !!that.dataSource.view().length;\n\n            if (that._request || that.options.cascadeFrom) {\n                return;\n            }\n\n            if (!that.listView.bound() && !that._fetch && !hasItems) {\n                that._fetch = true;\n                that.dataSource.fetch().done(function() {\n                    that._fetch = false;\n                });\n            }\n        },\n\n        _options: function(data, optionLabel, value) {\n            var that = this,\n                element = that.element,\n                htmlElement = element[0],\n                length = data.length,\n                options = \"\",\n                option,\n                dataItem,\n                dataText,\n                dataValue,\n                idx = 0;\n\n            if (optionLabel) {\n                options = optionLabel;\n            }\n\n            for (; idx < length; idx++) {\n                option = \"<option\";\n                dataItem = data[idx];\n                dataText = that._text(dataItem);\n                dataValue = that._value(dataItem);\n\n                if (dataValue !== undefined) {\n                    dataValue += \"\";\n\n                    if (dataValue.indexOf('\"') !== -1) {\n                        dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                    }\n\n                    option += ' value=\"' + dataValue + '\"';\n                }\n\n                option += \">\";\n\n                if (dataText !== undefined) {\n                    option += htmlEncode(dataText);\n                }\n\n                option += \"</option>\";\n                options += option;\n            }\n\n            element.html(options);\n\n            if (value !== undefined) {\n                htmlElement.value = value;\n                if (htmlElement.value && !value) {\n                    htmlElement.selectedIndex = -1;\n                }\n            }\n\n            if (htmlElement.selectedIndex !== -1) {\n                option = getSelectedOption(htmlElement);\n\n                if (option) {\n                    option.setAttribute(SELECTED, SELECTED);\n                }\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _parentWidget: function() {\n            var name = this.options.name;\n\n            if (!this.options.cascadeFrom) {\n                return;\n            }\n\n            var parentElement = $(\"#\" + this.options.cascadeFrom);\n            var parent = parentElement.data(\"kendo\" + name);\n\n            if (!parent) {\n                for (var i = 0; i < alternativeNames[name].length; i += 1) {\n                    parent = parentElement.data(\"kendo\" + alternativeNames[name][i]);\n\n                    if (!!parent) {\n                        break;\n                    }\n                }\n            }\n\n            return parent;\n        },\n\n        _cascade: function() {\n            var that = this;\n            var options = that.options;\n            var cascade = options.cascadeFrom;\n            var parent;\n\n            if (cascade) {\n                parent = that._parentWidget();\n\n                if (!parent) {\n                    return;\n                }\n\n                that._cascadeHandlerProxy = that._cascadeHandler.bind(that);\n                that._cascadeFilterRequests = [];\n\n                options.autoBind = false;\n\n                parent.bind(\"set\", function() { //will cascade\n                    that.one(\"set\", function(e) { //get your value\n                        that._selectedValue = e.value || that._accessor();\n                    });\n                });\n\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n\n                //refresh was called\n                if (parent.listView.bound()) {\n                    that._toggleCascadeOnFocus();\n                    that._cascadeSelect(parent);\n                } else {\n                    parent.one(DATA_BOUND, function() {\n                        that._toggleCascadeOnFocus();\n                        if (parent.popup.visible()) {\n                            parent._focused.trigger(FOCUS);\n                        }\n                    });\n\n                    if (!parent.value()) {\n                        that.enable(false);\n                    }\n                }\n            }\n        },\n\n        _toggleCascadeOnFocus: function() {\n            var that = this;\n            var parent = that._parentWidget();\n            var focusout = isIE && parent instanceof ui.DropDownList ? BLUR : FOCUSOUT;\n\n            parent._focused.add(parent.filterInput).on(FOCUS, function() {\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.first(CHANGE, that._cascadeHandlerProxy);\n            });\n\n            parent._focused.add(parent.filterInput).on(focusout, function() {\n                parent.unbind(CHANGE, that._cascadeHandlerProxy);\n                parent.unbind(CASCADE, that._cascadeHandlerProxy);\n                parent.first(CASCADE, that._cascadeHandlerProxy);\n            });\n        },\n\n        _cascadeHandler: function(e) {\n            var parent = this._parentWidget();\n            var valueBeforeCascade = this.value();\n\n            this._userTriggered = e.userTriggered || parent._userTriggered;\n\n            if (this.listView.bound()) {\n                this._clearSelection(parent, true);\n            }\n\n            this._cascadeSelect(parent, valueBeforeCascade);\n        },\n\n        _cascadeChange: function(parent) {\n            var that = this;\n            var value = that._accessor() || that._selectedValue;\n\n            if (!that._cascadeFilterRequests.length) {\n                that._selectedValue = null;\n            }\n\n            if (that._userTriggered) {\n                that._clearSelection(parent, true);\n            } else if (value) {\n                if (value !== unifyType(that.listView.value()[0], typeof value)) {\n                    that.value(value);\n                }\n\n                if (!that.dataSource.view()[0] || that.selectedIndex === -1) {\n                    that._clearSelection(parent, true);\n                }\n            } else if (that.dataSource.flatView().length) {\n                that.select(that.options.index);\n            }\n\n            that.enable();\n            that._triggerCascade();\n            that._triggerChange();\n            that._userTriggered = false;\n        },\n\n        _cascadeSelect: function(parent, valueBeforeCascade) {\n            var that = this;\n            var dataItem = parent.dataItem();\n            var filterValue = dataItem ? dataItem[that.options.cascadeFromParentField] || parent._value(dataItem) : null;\n            var valueField = that.options.cascadeFromField || parent.options.dataValueField;\n            var expressions;\n\n            that._valueBeforeCascade = valueBeforeCascade !== undefined ? valueBeforeCascade : that.value();\n\n            if (filterValue || filterValue === 0) {\n                expressions = that.dataSource.filter() || {};\n                removeFiltersForField(expressions, valueField);\n\n                var handler = function() {\n                    var currentHandler = that._cascadeFilterRequests.shift();\n                    if (currentHandler) {\n                        that.unbind('dataBound', currentHandler);\n                    }\n\n                    currentHandler = that._cascadeFilterRequests[0];\n                    if (currentHandler) {\n                        that.first('dataBound', currentHandler);\n                    }\n\n                    that._cascadeChange(parent);\n                };\n\n                that._cascadeFilterRequests.push(handler);\n\n                if (that._cascadeFilterRequests.length === 1) {\n                    that.first('dataBound', handler);\n                }\n\n                that._cascading = true;\n                that._filterSource({\n                    field: valueField,\n                    operator: \"eq\",\n                    value: filterValue\n                });\n                that._cascading = false;\n            } else {\n                that.enable(false);\n                that._clearSelection(parent);\n                that._triggerCascade();\n                that._triggerChange();\n                that._userTriggered = false;\n            }\n        }\n    });\n\n    var STATIC_LIST_NS = \".StaticList\";\n\n    var StaticList = kendo.ui.DataBoundWidget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            this.element.attr(\"role\", \"listbox\")\n                        .on(CLICK + STATIC_LIST_NS, \"li\", this._click.bind(this))\n                        .on(MOUSEENTER + STATIC_LIST_NS, \"li\", function() { $(this).addClass(HOVER); })\n                        .on(MOUSELEAVE + STATIC_LIST_NS, \"li\", function() { $(this).removeClass(HOVER); });\n\n            if (options && options.ariaLabel) {\n                this.element.attr(ARIA_LABEL, options.ariaLabel);\n            } else if (options && options.ariaLabelledBy) {\n                this.element.attr(ARIA_LABELLEDBY, options.ariaLabelledBy);\n            }\n\n            if (support.touch) {\n                this._touchHandlers();\n            }\n\n            if (this.options.selectable === \"multiple\") {\n                this.element.attr(ARIA_MULTISELECTABLE, true);\n            }\n\n            if (this.options.columns && this.options.columns.length) {\n                var thead = this.element.parent().find('.k-table-thead');\n                var row = $('<tr class=\"k-table-group-row\">' +\n                    '<th class=\"k-table-th\" colspan=\"' + this.options.columns.length + '\"></th>' +\n                '</tr>');\n\n                thead.append(row);\n\n                this.header = row.find(\".k-table-th\");\n\n                this.content = this.element.wrap(\"<div class='k-table-body k-table-scroller' unselectable='on'></div>\").parent();\n\n                this.element.addClass(TABLE_LIST);\n            } else {\n                this.content = this.element.wrap(\"<div class='k-list-content k-list-scroller' unselectable='on'></div>\").parent();\n                this.header = this.content.before('<div class=\"k-list-group-sticky-header\" style=\"display:none\"></div>').prev();\n                this.element.addClass(LIST_UL);\n            }\n\n            this.bound(false);\n\n            this._optionID = kendo.guid();\n\n            this._selectedIndices = [];\n\n            this._view = [];\n            this._dataItems = [];\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value) {\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            this._getter();\n            this._templates();\n\n            this.setDataSource(this.options.dataSource);\n\n            this._createOnScrollProxy();\n        },\n\n        options: {\n            name: \"StaticList\",\n            dataValueField: null,\n            valuePrimitive: false,\n            selectable: true,\n            template: null,\n            groupTemplate: null,\n            fixedGroupTemplate: null,\n            ariaLabel: null,\n            ariaLabelledBy: null\n        },\n\n        events: [\n           CLICK,\n            CHANGE,\n           ACTIVATE,\n           DEACTIVATE,\n           DATA_BINDING,\n           DATA_BOUND,\n           SELECTED_ITEM_CHANGE\n        ],\n\n        setDataSource: function(source) {\n            var that = this;\n            var dataSource = source || {};\n            var value;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n            dataSource = kendo.data.DataSource.create(dataSource);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n\n                value = that.value();\n\n                that.value([]);\n                that.bound(false);\n\n                that.value(value);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n            }\n\n            that.setDSFilter(dataSource.filter());\n\n            that.dataSource = dataSource.bind(CHANGE, that._refreshHandler);\n            that._fixedHeader();\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startY;\n            var endY;\n            var tapPosition = function(event) {\n                return (event.originalEvent || event).changedTouches[0].pageY;\n            };\n\n            that.element.on(\"touchstart\" + STATIC_LIST_NS, function(e) {\n                startY = tapPosition(e);\n            });\n\n            that.element.on(\"touchend\" + STATIC_LIST_NS, function(e) {\n                if (e.isDefaultPrevented()) {\n                    return;\n                }\n\n                endY = tapPosition(e);\n\n                if (Math.abs(endY - startY) < 10) {\n                    that._touchTriggered = true;\n                    that._triggerClick($(e.target).closest(ITEMSELECTOR).get(0));\n                }\n            });\n        },\n\n        skip: function() {\n            return this.dataSource.skip();\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._getter();\n            this._templates();\n            this._render();\n        },\n\n        destroy: function() {\n            this.element.off(STATIC_LIST_NS);\n\n            if (this._refreshHandler) {\n                this.dataSource.unbind(CHANGE, this._refreshHandler);\n            }\n\n            clearTimeout(this._scrollId);\n\n            Widget.fn.destroy.call(this);\n        },\n\n        dataItemByIndex: function(index) {\n            return this.dataSource.flatView()[index];\n        },\n\n        screenHeight: function() {\n            return this.content[0].clientHeight;\n        },\n\n        scrollToIndex: function(index) {\n            var item = this.element[0].children[index];\n\n            if (item) {\n                this.scroll(item);\n            }\n        },\n\n        scrollWith: function(value) {\n            this.content.scrollTop(this.content.scrollTop() + value);\n        },\n\n        scroll: function(item) {\n            if (!item) {\n                return;\n            }\n\n            if (item[0]) {\n                item = item[0];\n            }\n\n            var content = this.content[0],\n                itemOffsetTop = item.offsetTop,\n                itemOffsetHeight = item.offsetHeight,\n                contentScrollTop = content.scrollTop,\n                contentOffsetHeight = content.clientHeight,\n                bottomDistance = itemOffsetTop + itemOffsetHeight;\n\n                if (contentScrollTop > itemOffsetTop) {\n                    contentScrollTop = itemOffsetTop;\n                } else if (bottomDistance > (contentScrollTop + contentOffsetHeight)) {\n                    contentScrollTop = (bottomDistance - contentOffsetHeight);\n                }\n\n                content.scrollTop = contentScrollTop;\n        },\n\n        selectedDataItems: function(dataItems) {\n            if (dataItems === undefined) {\n                return this._dataItems.slice();\n            }\n\n            this._dataItems = dataItems;\n            this._values = this._getValues(dataItems);\n        },\n\n        _getValues: function(dataItems) {\n            var getter = this._valueGetter;\n\n            return $.map(dataItems, function(dataItem) {\n                return getter(dataItem);\n            });\n        },\n\n        focusNext: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = 0;\n            } else {\n                current = current.next();\n            }\n\n            this.focus(current);\n        },\n\n        focusPrev: function() {\n            var current = this.focus();\n\n            if (!current) {\n                current = this.element[0].children.length - 1;\n            } else {\n                current = current.prev();\n            }\n\n            this.focus(current);\n        },\n\n        focusFirst: function() {\n            this.focus(this.element[0].children[0]);\n        },\n\n        focusLast: function() {\n            this.focus(last(this.element[0].children));\n        },\n\n        focus: function(candidate) {\n            var that = this;\n            var id = that._optionID;\n            var hasCandidate;\n\n            if (candidate === undefined) {\n                return that._current;\n            }\n\n            candidate = last(that._get(candidate));\n            candidate = $(this.element[0].children[candidate]);\n\n            if (that._current) {\n                that._current\n                    .removeClass(FOCUSED)\n                    .removeAttr(ID);\n\n                that.trigger(DEACTIVATE);\n            }\n\n            hasCandidate = !!candidate[0];\n\n            if (hasCandidate) {\n                candidate.addClass(FOCUSED);\n                that.scroll(candidate);\n\n                candidate.attr(\"id\", id);\n            }\n\n            that._current = hasCandidate ? candidate : null;\n            that.trigger(ACTIVATE);\n        },\n\n        focusIndex: function() {\n            return this.focus() ? this.focus().index() : undefined;\n        },\n\n        skipUpdate: function(skipUpdate) {\n            this._skipUpdate = skipUpdate;\n        },\n\n        select: function(indices) {\n            var that = this;\n            var selectable = that.options.selectable;\n            var singleSelection = selectable !== \"multiple\" && selectable !== false;\n            var selectedIndices = that._selectedIndices;\n            var uiSelectedIndices = [this.element.find(\".k-selected\").index()];\n\n            var added = [];\n            var removed = [];\n            var result;\n\n            if (indices === undefined) {\n                return selectedIndices.slice();\n            }\n\n            indices = that._get(indices);\n\n            if (indices.length === 1 && indices[0] === -1) {\n                indices = [];\n            }\n\n            var deferred = $.Deferred().resolve();\n            var filtered = that.isFiltered();\n\n            if (filtered && !singleSelection && that._deselectFiltered(indices)) {\n                return deferred;\n            }\n\n            if (singleSelection && !filtered &&\n                $.inArray(last(indices), selectedIndices) !== -1 && $.inArray(last(indices), uiSelectedIndices) !== -1) {\n\n                if (that._dataItems.length && that._view.length) {\n                    that._dataItems = [that._view[selectedIndices[0]].item];\n                }\n\n                return deferred;\n            }\n\n            result = that._deselect(indices);\n\n            removed = result.removed;\n            indices = result.indices;\n\n            if (indices.length) {\n                if (singleSelection) {\n                    indices = [last(indices)];\n                }\n\n                added = that._select(indices);\n            }\n\n            if (added.length || removed.length) {\n                that._valueComparer = null;\n                that.trigger(CHANGE, {\n                    added: added,\n                    removed: removed\n                });\n            }\n\n            return deferred;\n        },\n\n        removeAt: function(position) {\n            this._selectedIndices.splice(position, 1);\n            this._values.splice(position, 1);\n            this._valueComparer = null;\n\n            return {\n                position: position,\n                dataItem: this._dataItems.splice(position, 1)[0]\n            };\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n\n            this._valueComparer = null;\n        },\n\n        value: function(value) {\n            var that = this;\n            var deferred = that._valueDeferred;\n            var indices;\n\n            if (value === undefined) {\n                return that._values.slice();\n            }\n\n            that.setValue(value);\n\n            if (!deferred || deferred.state() === \"resolved\") {\n                that._valueDeferred = deferred = $.Deferred();\n            }\n\n            if (that.bound()) {\n                indices = that._valueIndices(that._values);\n\n                if (that.options.selectable === \"multiple\") {\n                    that.select(-1);\n                }\n\n                that.select(indices);\n\n                deferred.resolve();\n            }\n\n            that._skipUpdate = false;\n\n            return deferred;\n        },\n\n        items: function() {\n            return this.element.children(ITEMSELECTOR);\n        },\n\n        _click: function(e) {\n            if (this._touchTriggered)\n            {\n                this._touchTriggered = false;\n                return;\n            }\n\n            if (!e.isDefaultPrevented()) {\n                this._triggerClick(e.currentTarget);\n            }\n        },\n\n        _createOnScrollProxy: function() {\n            var onScrollProxy = function() {\n                var that = this;\n                clearTimeout(that._scrollId);\n\n                that._scrollId = setTimeout(function() {\n                    that._renderHeader();\n                }, 50);\n            };\n\n            this._onScroll = onScrollProxy.bind(this);\n        },\n\n        _triggerClick: function(item) {\n            if (!this.trigger(CLICK, { item: $(item) })) {\n                this.select(item);\n            }\n        },\n\n        _valueExpr: function(type, values) {\n            var that = this;\n            var idx = 0;\n\n            var body;\n            var comparer;\n            var normalized = [];\n\n            if (!that._valueComparer || that._valueType !== type) {\n                that._valueType = type;\n\n                for (; idx < values.length; idx++) {\n                    normalized.push(unifyType(values[idx], type));\n                }\n\n                body = \"for (var idx = 0; idx < \" + normalized.length + \"; idx++) {\" +\n                        \" if (current === values[idx]) {\" +\n                        \"   return idx;\" +\n                        \" }\" +\n                        \"} \" +\n                        \"return -1;\";\n\n                comparer = new Function(\"current\", \"values\", body);\n\n                that._valueComparer = function(current) {\n                    return comparer(current, normalized);\n                };\n            }\n\n            return that._valueComparer;\n        },\n\n        _dataItemPosition: function(dataItem, values) {\n            var value = this._valueGetter(dataItem);\n\n            var valueExpr = this._valueExpr(typeof value, values);\n\n            return valueExpr(value);\n        },\n\n        _getter: function() {\n            this._valueGetter = kendo.getter(this.options.dataValueField);\n        },\n\n        _deselect: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var selectable = that.options.selectable;\n            var selectedIndices = that._selectedIndices;\n            var dataItems = that._dataItems;\n            var values = that._values;\n            var removed = [];\n            var i = 0;\n            var j;\n\n            var index, selectedIndex;\n            var removedIndices = 0;\n\n            indices = indices.slice();\n\n            if (selectable === true || !indices.length) {\n                for (; i < selectedIndices.length; i++) {\n                    $(children[selectedIndices[i]]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n\n                    removed.push({\n                        position: i,\n                        dataItem: dataItems[i]\n                    });\n                }\n\n                that._values = [];\n                that._dataItems = [];\n                that._selectedIndices = [];\n            } else if (selectable === \"multiple\") {\n                for (; i < indices.length; i++) {\n                    index = indices[i];\n\n                    if (!$(children[index]).hasClass(KSELECTED)) {\n                        continue;\n                    }\n\n                    for (j = 0; j < selectedIndices.length; j++) {\n                        selectedIndex = selectedIndices[j];\n\n                        if (selectedIndex === index) {\n                            $(children[selectedIndex]).removeClass(KSELECTED).attr(ARIA_SELECTED, false);\n                            var dataItem = this._view[index].item;\n                            var position = this._dataItemPosition(dataItem, this._values);\n\n                            removed.push({\n                                position: position,\n                                dataItem: dataItem\n                            });\n\n                            dataItems.splice(j, 1);\n                            selectedIndices.splice(j, 1);\n                            indices.splice(i, 1);\n                            values.splice(j, 1);\n\n                            removedIndices += 1;\n                            i -= 1;\n                            j -= 1;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            return {\n                indices: indices,\n                removed: removed\n            };\n        },\n\n        _deselectFiltered: function(indices) {\n            var children = this.element[0].children;\n            var dataItem, index, position;\n            var removed = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n\n                dataItem = this._view[index].item;\n                position = this._dataItemPosition(dataItem, this._values);\n\n                if (position > -1) {\n                    removed.push(this.removeAt(position));\n                    $(children[index]).removeClass(KSELECTED);\n                }\n            }\n\n            if (removed.length) {\n                this.trigger(CHANGE, {\n                    added: [],\n                    removed: removed\n                });\n\n                return true;\n            }\n\n            return false;\n        },\n\n        _select: function(indices) {\n            var that = this;\n            var children = that.element[0].children;\n            var data = that._view;\n            var dataItem, index;\n            var added = [];\n            var idx = 0;\n\n            if (last(indices) !== -1) {\n                that.focus(indices);\n            }\n\n            for (; idx < indices.length; idx++) {\n                index = indices[idx];\n                dataItem = data[index];\n\n                if (index === -1 || !dataItem) {\n                    continue;\n                }\n\n                dataItem = dataItem.item;\n\n                that._selectedIndices.push(index);\n                that._dataItems.push(dataItem);\n                that._values.push(that._valueGetter(dataItem));\n\n                $(children[index]).addClass(KSELECTED).attr(ARIA_SELECTED, true);\n\n                added.push({\n                    dataItem: dataItem\n                });\n            }\n\n            return added;\n        },\n\n        getElementIndex: function(element) {\n            return $(element).data(\"offset-index\");\n        },\n\n        _get: function(candidate) {\n            if (typeof candidate === \"number\") {\n                candidate = [candidate];\n            } else if (!isArray(candidate)) {\n                candidate = this.getElementIndex(candidate);\n                candidate = [candidate !== undefined ? candidate : -1];\n            }\n\n            return candidate;\n        },\n\n        _template: function() {\n            var that = this;\n            var options = that.options;\n            var template = options.template;\n\n            if (!template) {\n                template = kendo.template('<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\"><span class=\"k-list-item-text\">${' + kendo.expr(options.dataTextField, \"data\") + \"}</span></li>\", { useWithBlock: false });\n            } else {\n                template = kendo.template(template);\n                template = function(data) {\n                    return '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" class=\"k-list-item\">' + template(data) + \"</li>\";\n                };\n            }\n\n            return template;\n        },\n\n        _templates: function() {\n            var template;\n            var options = this.options;\n            var templates = {\n                template: options.template,\n                groupTemplate: options.groupTemplate,\n                fixedGroupTemplate: options.fixedGroupTemplate\n            };\n\n            if (options.columns) {\n                for (var i = 0; i < options.columns.length; i++) {\n                    var currentColumn = options.columns[i];\n                    var templateText = currentColumn.field ? currentColumn.field.toString() : TEXT;\n\n                    templates[\"column\" + i] = currentColumn.template || \"#: \" + templateText + \"#\";\n                }\n            }\n\n            for (var key in templates) {\n                template = templates[key];\n                if (template && typeof template !== \"function\") {\n                    templates[key] = kendo.template(template);\n                }\n            }\n\n            this.templates = templates;\n        },\n\n        _normalizeIndices: function(indices) {\n            var newIndices = [];\n            var idx = 0;\n\n            for (; idx < indices.length; idx++) {\n                if (indices[idx] !== undefined) {\n                    newIndices.push(indices[idx]);\n                }\n            }\n\n            return newIndices;\n        },\n\n        _valueIndices: function(values, indices) {\n            var data = this._view;\n            var idx = 0;\n            var index;\n\n            indices = indices ? indices.slice() : [];\n\n            if (!values.length) {\n                return [];\n            }\n\n            for (; idx < data.length; idx++) {\n                index = this._dataItemPosition(data[idx].item, values);\n\n                if (index !== -1) {\n                    indices[index] = idx;\n                }\n            }\n\n            return this._normalizeIndices(indices);\n        },\n\n        _firstVisibleItem: function() {\n            var element = this.element[0];\n            var content = this.content[0];\n            var scrollTop = content.scrollTop;\n            var itemHeight = $(element.children[0]).height();\n            var itemIndex = Math.floor(scrollTop / itemHeight) || 0;\n            var item = element.children[itemIndex] || element.lastChild;\n            var forward = item.offsetTop < scrollTop;\n\n            while (item) {\n                if (forward) {\n                    if ((item.offsetTop + itemHeight) > scrollTop || !item.nextSibling) {\n                        break;\n                    }\n\n                    item = item.nextSibling;\n                } else {\n                    if (item.offsetTop <= scrollTop || !item.previousSibling) {\n                        break;\n                    }\n\n                    item = item.previousSibling;\n                }\n            }\n\n            return this._view[$(item).data(\"offset-index\")];\n        },\n\n        _fixedHeader: function() {\n            if (this.isGrouped() && this.templates.fixedGroupTemplate) {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).show();\n                } else {\n                    this.header.show();\n                }\n\n                this.content.scroll(this._onScroll);\n            } else {\n                if (this.header.closest(GROUP_ROW_SEL).length) {\n                    this.header.closest(GROUP_ROW_SEL).hide();\n                } else {\n                    this.header.hide();\n                }\n\n                this.content.off(\"scroll\", this._onScroll);\n            }\n        },\n\n        _renderHeader: function() {\n            var template = this.templates.fixedGroupTemplate;\n            if (!template) {\n                return;\n            }\n\n            var visibleItem = this._firstVisibleItem();\n\n            if (visibleItem && visibleItem.group.toString().length) {\n                this.header.html(template(visibleItem.group));\n            }\n        },\n\n        _renderItem: function(context) {\n            var item = '<li tabindex=\"-1\" role=\"option\" unselectable=\"on\" ';\n\n            var dataItem = context.item;\n            var notFirstItem = context.index !== 0;\n            var selected = context.selected;\n            var isGrouped = this.isGrouped();\n            var hasColumns = this.options.columns && this.options.columns.length;\n            var altRow = context.index % 2 === 1 ? \" k-table-alt-row\" : \"\";\n\n            if (hasColumns) {\n                item += ('class=\"k-table-row' + altRow);\n            } else {\n                item += 'class=\"k-list-item';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                item += ' k-first';\n            }\n\n            if (context.isLastGroupedItem && hasColumns) {\n                item += ' k-last';\n            }\n\n            if (selected) {\n                item += ' k-selected';\n            }\n\n            item += '\" aria-selected=\"' + (selected ? \"true\" : \"false\") + '\" data-offset-index=\"' + context.index + '\">';\n            if (hasColumns) {\n                item += this._renderColumns(dataItem);\n            } else {\n                item += '<span class=\"k-list-item-text\">';\n                item += this.templates.template(dataItem);\n                item += '</span>';\n            }\n\n            if (notFirstItem && context.newGroup) {\n                if (hasColumns) {\n                    item += '<span class=\"k-table-td k-table-group-td\"><span>' + this.templates.groupTemplate(context.group) + '</span></span>';\n                } else {\n                    item += '<div class=\"k-list-item-group-label\">' + this.templates.groupTemplate(context.group) + '</div>';\n                }\n            } else if (isGrouped && hasColumns) {\n                item += '<span class=\"k-table-td k-table-spacer-td\"></span>';\n            }\n\n            return item + \"</li>\";\n        },\n\n        _renderColumns: function(dataItem) {\n            var item = \"\";\n\n            for (var i = 0; i < this.options.columns.length; i++) {\n                var currentWidth = this.options.columns[i].width;\n                var currentWidthInt = parseInt(currentWidth, 10);\n                var widthStyle = '';\n\n                if (currentWidth && !isNaN(currentWidthInt)) {\n                    widthStyle += \"style='width:\";\n                    widthStyle += currentWidthInt;\n                    widthStyle += percentageUnitsRegex.test(currentWidth) ? \"%\" : \"px\";\n                    widthStyle += \";'\";\n                }\n                item += \"<span class='k-table-td' \" + widthStyle + \">\";\n                item += this.templates[\"column\" + i](dataItem);\n                item += \"</span>\";\n            }\n\n            return item;\n        },\n\n        _render: function() {\n            var html = \"\";\n\n            var i = 0;\n            var idx = 0;\n            var context;\n            var dataContext = [];\n            var view = this.dataSource.view();\n            var values = this.value();\n\n            var group, newGroup, j;\n            var isGrouped = this.isGrouped();\n\n            if (isGrouped) {\n                for (i = 0; i < view.length; i++) {\n                    group = view[i];\n                    newGroup = true;\n\n                    for (j = 0; j < group.items.length; j++) {\n                        context = {\n                            selected: this._selected(group.items[j], values),\n                            item: group.items[j],\n                            group: group.value,\n                            newGroup: newGroup,\n                            isLastGroupedItem: j === group.items.length - 1,\n                            index: idx };\n                        dataContext[idx] = context;\n                        idx += 1;\n\n                        html += this._renderItem(context);\n                        newGroup = false;\n                    }\n                }\n            } else {\n                for (i = 0; i < view.length; i++) {\n                    context = { selected: this._selected(view[i], values), item: view[i], index: i };\n\n                    dataContext[i] = context;\n\n                    html += this._renderItem(context);\n                }\n            }\n\n            this._view = dataContext;\n\n            this.element[0].innerHTML = html;\n\n            if (isGrouped && dataContext.length) {\n                this._renderHeader();\n            }\n        },\n\n        _selected: function(dataItem, values) {\n            var select = !this.isFiltered() || this.options.selectable === \"multiple\";\n            return select && this._dataItemPosition(dataItem, values) !== -1;\n        },\n\n        setDSFilter: function(filter) {\n            this._lastDSFilter = extend({}, filter);\n        },\n\n        isFiltered: function() {\n            if (!this._lastDSFilter) {\n                this.setDSFilter(this.dataSource.filter());\n            }\n\n            return !kendo.data.Query.compareFilters(this.dataSource.filter(), this._lastDSFilter);\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var action = e && e.action;\n            var skipUpdateOnBind = that.options.skipUpdateOnBind;\n            var isItemChange = action === \"itemchange\";\n            var result;\n\n            that.trigger(DATA_BINDING);\n            that._angularItems(\"cleanup\");\n\n            that._fixedHeader();\n\n            that._render();\n\n            that.bound(true);\n\n            if (isItemChange || action === \"remove\") {\n                result = mapChangedItems(that._dataItems, e.items);\n\n                if (result.changed.length) {\n                    if (isItemChange) {\n                        that.trigger(SELECTED_ITEM_CHANGE, {\n                            items: result.changed\n                        });\n                    } else {\n                        that.value(that._getValues(result.unchanged));\n                    }\n                }\n            } else if (that.isFiltered() || that._skipUpdate || that._emptySearch) {\n                that.focus(0);\n                if (that._skipUpdate) {\n                    that._skipUpdate = false;\n                    that._selectedIndices = that._valueIndices(that._values, that._selectedIndices);\n                }\n            } else if (!skipUpdateOnBind && (!action || action === \"add\")) {\n                that.value(that._values);\n            }\n\n            if (that._valueDeferred) {\n                that._valueDeferred.resolve();\n            }\n\n            that._angularItems(\"compile\");\n            that.trigger(DATA_BOUND);\n        },\n\n        bound: function(bound) {\n            if (bound === undefined) {\n                return this._bound;\n            }\n\n            this._bound = bound;\n        },\n\n        isGrouped: function() {\n            return (this.dataSource.group() || []).length;\n        }\n    });\n\n    ui.plugin(StaticList);\n\n    function last(list) {\n        return list[list.length - 1];\n    }\n\n    function getSelectedOption(select) {\n        var index = select.selectedIndex;\n        return index > -1 ? select.options[index] : {};\n    }\n\n    function mapChangedItems(selected, itemsToMatch) {\n        var itemsLength = itemsToMatch.length;\n        var selectedLength = selected.length;\n        var dataItem;\n        var found;\n        var i, j;\n\n        var changed = [];\n        var unchanged = [];\n\n        if (selectedLength) {\n            for (i = 0; i < selectedLength; i++) {\n                dataItem = selected[i];\n                found = false;\n\n                for (j = 0; j < itemsLength; j++) {\n                    if (dataItem === itemsToMatch[j]) {\n                        found = true;\n                        changed.push({ index: i, item: dataItem });\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    unchanged.push(dataItem);\n                }\n            }\n        }\n\n        return {\n            changed: changed,\n            unchanged: unchanged\n        };\n    }\n\n    function isValidFilterExpr(expression) {\n        if (!expression || $.isEmptyObject(expression)) {\n            return false;\n        }\n\n        if (expression.filters && !expression.filters.length) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function removeFiltersForField(expression, field) {\n        var filters;\n        var found = false;\n\n        if (expression.filters) {\n            filters = $.grep(expression.filters, function(filter) {\n                found = removeFiltersForField(filter, field);\n                if (filter.filters) {\n                    return filter.filters.length;\n                } else {\n                    return filter.field != field;\n                }\n            });\n\n            if (!found && expression.filters.length !== filters.length) {\n                found = true;\n            }\n\n            expression.filters = filters;\n        }\n\n        return found;\n    }\n\n    kendo.cssProperties.registerPrefix(\"List\", \"k-list-\");\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","depends","hidden","$","window","kendo","jQuery","undefined","ui","outerHeight","_outerHeight","percentageUnitsRegex","Widget","keys","support","htmlEncode","activeElement","_activeElement","outerWidth","_outerWidth","ObservableArray","data","ID","CHANGE","FOCUSED","HOVER","KSELECTED","LOADING","LIST","TABLE","DATA_TABLE","TABLE_MD","LIST_UL","TABLE_LIST","FIXED_GROUP_HEADER","GROUP_LABEL","ITEMSELECTOR","LABELIDPART","OPEN","CLOSE","CASCADE","SELECT","CLICK","MOUSELEAVE","MOUSEENTER","ACTIVATE","DEACTIVATE","DATA_BINDING","DATA_BOUND","SELECTED_ITEM_CHANGE","SELECTED","REQUESTSTART","REQUESTEND","BLUR","FOCUS","FOCUSOUT","extend","isArray","Array","browser","HIDDENCLASS","WIDTH","TEXT","VALUE","isIE","msie","quotRegExp","alternativeNames","ComboBox","DropDownList","MultiColumnComboBox","UL_EL","LIST_EL","NO_DATA_EL","LIST_FOOTER_EL","TABLE_FOOTER_EL","MOUSEDOWN","LIST_SUFFIX","LISTBOX_SUFFIX","ARIA_LABELLEDBY","ARIA_LABEL","ARIA_ACTIVEDESCENDANT","ARIA_AUTOCOMPLETE","ARIA_CONTROLS","ARIA_LIVE","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_BUSY","ARIA_MULTISELECTABLE","ARIA_SELECTED","GROUP_ROW_SEL","List","DataBoundWidget","init","element","options","that","this","fn","call","_isSelect","is","length","dataSource","dataTextField","dataValueField","_listSize","cssProperties","getValidClass","widget","propName","value","size","ul","attr","tabIndex","aria-hidden","list","addClass","append","guid","columns","removeClass","_columnsHeader","_header","_noData","_footer","_accessors","_initValue","valuePrimitive","footerTemplate","headerTemplate","noDataTemplate","messages","noData","clear","setOptions","enable","enabled","_renderFooter","_renderNoData","focus","_focused","trigger","readonly","_editable","disable","header","template","_angularElement","destroy","remove","parent","before","columnsHeader","colGroup","row","idx","currentColumn","title","field","columnsHeaderTemplate","currentWidth","width","currentWidthInt","parseInt","widthStyle","isNaN","test","prepend","angular","elements","appendTo","footer","footerEl","_listOptions","currentOptions","virtual","changeEventOption","change","_listChange","bind","listBoundHandler","_listBound","focusedElm","inputId","labelElm","labelledBy","_generateLabelId","autoBind","selectable","click","_click","activate","_activateItem","deactivate","_deactivateItem","dataBinding","dataBound","height","groupTemplate","fixedGroupTemplate","ariaLabel","ariaLabelledBy","listSize","expr","$angular","_initList","listOptions","selectedItemChange","listView","StaticList","VirtualList","_setListValue","done","_updateSelectionState","noop","_listMousedown","e","filterInput","target","preventDefault","_isFilterEnabled","filter","_hideClear","_clear","_showClear","_clearValue","_clearText","_accessor","_customOption","enforceMinLength","_filter","word","open","highlightFirst","_change","text","_clearFilter","bound","_filterSource","force","isMultiColumnFiltering","filterFields","logic","filters","expression","resetPageSettings","removed","removeFiltersForField","_clearFilterExpressions","Deferred","reject","promise","newExpression","push","_pushFilterExpression","isValidFilterExpr","concat","_cascading","setDSFilter","dataSourceState","page","pageSize","sort","group","aggregate","_mergeState","filtersToRemove","i","splice","action","html","instance","_toggleNoData","show","toggle","_toggleHeader","groupHeader","content","prev","children","first","_allowOpening","flatView","val","_old","_ignoreCase","model","reader","fields","type","ignoreCase","_focus","candidate","widgetOptions","fromFilter","_buildExpression","_open","accentFoldingFiltering","toLocaleLowerCase","toLowerCase","operator","_clearButton","clearTitle","role","clearButton","search","_inputValue","clearTimeout","_typingTimeout","minLength","_state","_emptySearch","trim","_searchByWord","current","items","ns","_unbindDataSource","off","popup","_form","_resetHandler","dataItem","index","selectedDataItems","getByUid","visible","add","removeAttr","getter","textField","valueField","_text","_value","_aria","autocomplete","suggest","aria-owns","aria-controls","_ariaLabel","inputElm","labelId","label","_blur","close","_userTriggered","_isValueChanged","unifyType","selectedIndex","optionValue","_valueBeforeCascade","_oldIndex","isFiltered","_typing","typing","_data","view","_enable","disabled","_dataValue","_offsetHeight","offsetHeight","siblings","prevAll","each","_height","isMccb","offsetTop","popups","closest","hide","scrollHeight","_openHandler","_adjustListWidth","style","wrapper","computedStyle","computedWidth","getComputedStyle","parseFloat","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","css","fontFamily","autoWidth","minWidth","whiteSpace","_closeHandler","_focusItem","noFocusedItem","last","select","scrollToIndex","_calculateGroupPadding","li","padding","direction","display","scrollbar","parents","_calculatePopupHeight","_calculateColumnsHeaderPadding","isRtl","_refreshScroll","enableYScroll","overflowX","overflowY","_resizePopup","one","_popup","wrap","Popup","anchor","animation","autosize","on","_toggleHover","currentTarget","toggleClass","_toggle","preventFocus","touchEnabled","mobileOS","touch","MSPointers","pointers","_prevent","_triggerCascade","_cascadeTriggered","_cascadedValue","userTriggered","_triggerChange","unbind","_requestStartHandler","_requestEndHandler","_errorHandler","requireValueMapper","hasValue","valueMapper","Error","toString","Boolean","Number","inArray","node","parentNode","Select","_initial","setDataSource","_dataSource","_initialIndex","_current","fetch","_parentWidget","_cascadeSelect","_select","_cascadeValue","_accessorInput","_accessorSelect","getSelectedOption","selected","_custom","_syncValueAndText","custom","_hideBusy","_busy","_arrowIcon","_showBusy","isDefaultPrevented","_request","setTimeout","_requestEnd","DataSource","create","_firstItem","focusFirst","_lastItem","focusLast","_nextItem","focusNext","_prevItem","focusPrev","_getNormalizedDataItem","isIndex","hasOptionLabel","optionLabel","getElementIndex","dataItemByIndex","_getNormalizedSelectCandidate","normalizedCandidate","_move","key","keyCode","down","DOWN","isVirtual","pressed","moveIndex","selectCandidate","UP","altKey","firstChild","_fetch","hasClass","total","_get","item","ENTER","TAB","activeFilter","selection","shouldTrigger","input","_focusElement","focusout","ESC","PAGEDOWN","PAGEUP","scrollWith","screenHeight","_fetchData","hasItems","cascadeFrom","_options","htmlElement","option","dataText","dataValue","indexOf","replace","setAttribute","_reset","formId","form","parentElement","_cascade","cascade","_cascadeHandlerProxy","_cascadeHandler","_cascadeFilterRequests","_selectedValue","_toggleCascadeOnFocus","valueBeforeCascade","_clearSelection","_cascadeChange","filterValue","cascadeFromParentField","cascadeFromField","expressions","handler","currentHandler","shift","STATIC_LIST_NS","_touchHandlers","thead","find","_optionID","_selectedIndices","_view","_dataItems","_values","slice","_getter","_templates","_createOnScrollProxy","events","source","_refreshHandler","refresh","_fixedHeader","startY","endY","tapPosition","event","originalEvent","changedTouches","pageY","Math","abs","_touchTriggered","_triggerClick","get","skip","_render","_scrollId","clientHeight","scroll","scrollTop","itemOffsetTop","itemOffsetHeight","contentScrollTop","contentOffsetHeight","bottomDistance","dataItems","_getValues","_valueGetter","map","next","hasCandidate","focusIndex","skipUpdate","_skipUpdate","indices","singleSelection","selectedIndices","uiSelectedIndices","added","result","deferred","resolve","filtered","_deselectFiltered","_deselect","_valueComparer","removeAt","position","setValue","_valueDeferred","state","_valueIndices","onScrollProxy","_renderHeader","_onScroll","_valueExpr","values","body","comparer","normalized","_valueType","Function","_dataItemPosition","valueExpr","j","removedIndices","_template","useWithBlock","templates","templateText","_normalizeIndices","newIndices","_firstVisibleItem","itemHeight","itemIndex","floor","lastChild","forward","nextSibling","previousSibling","isGrouped","visibleItem","_renderItem","context","notFirstItem","hasColumns","altRow","newGroup","isLastGroupedItem","_renderColumns","dataContext","_selected","innerHTML","_lastDSFilter","Query","compareFilters","skipUpdateOnBind","isItemChange","_angularItems","mapChangedItems","changed","unchanged","_bound","itemsToMatch","itemsLength","selectedLength","found","isEmptyObject","grep","plugin","registerPrefix","amd","a1","a2","a3"],"mappings":"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"}